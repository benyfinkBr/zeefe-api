<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17483604386"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17483604386');
</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Salvar cartão - Ze.EFE</title>
  <link rel="stylesheet" href="/style.css?v=20241222" />
  <style>
    body.card-save-page {
      background: #f6f7fb;
      min-height: 100vh;
      margin: 0;
      padding: 24px 12px 48px;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: #222;
    }
    .card-form {
      max-width: 560px;
      margin: 0 auto 32px;
      padding: 28px 32px;
      border-radius: 16px;
      background: #fff;
      box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08);
    }
    .card-form h1 {
      margin: 0 0 12px;
      font-size: 1.9rem;
    }
    .card-form p {
      line-height: 1.5;
      margin: 0 0 12px;
    }
    .card-form form {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .card-form label {
      font-weight: 600;
      display: block;
      margin-bottom: 4px;
    }
    .card-form input[type="number"],
    .card-form input[type="text"] {
      width: 100%;
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid #d0d5dd;
      font-size: 1rem;
    }
    .card-form input:focus {
      outline: 2px solid #2563eb;
      border-color: #2563eb;
    }
    .card-help {
      font-size: 0.9rem;
      color: #5f6b7a;
      margin: -10px 0 4px;
    }
    .stripe-field {
      border: 1px solid #d0d5dd;
      border-radius: 8px;
      padding: 14px;
      background: #fdfdfd;
    }
    .card-status {
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 8px;
      font-size: 0.95rem;
      display: none;
    }
    .card-status.success {
      background: #ecfdf3;
      color: #0f5132;
      border: 1px solid #a6f4c5;
    }
    .card-status.error {
      background: #fef2f2;
      color: #842029;
      border: 1px solid #fecaca;
    }
    .card-status.visible {
      display: block;
    }
    .card-list-card {
      max-width: 560px;
      margin: 0 auto;
    }
    .card-list-card h2 {
      margin: 0 0 16px;
      font-size: 1.4rem;
    }
    .card-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .card-list li {
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      background: #fefefe;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.95rem;
    }
    .card-list li.card-error {
      border-color: #fecaca;
      background: #fef2f2;
      color: #991b1b;
    }
    .card-list li .card-brand {
      font-weight: 600;
      color: #0f172a;
    }
    .card-list li .card-provider {
      font-size: 0.8rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #e0f2fe;
      color: #0369a1;
      align-self: flex-start;
    }
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #2563eb;
      text-decoration: none;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .btn {
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
    }
    .btn-primary {
      background: #2563eb;
      color: #fff;
    }
    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    @media (max-width: 640px) {
      .card-form {
        padding: 24px;
      }
    }
  </style>
</head>
<body class="card-save-page">
  <main class="card-form">
    <a href="/clientes.html" class="back-link">← Voltar ao Portal</a>
    <h1>Cadastrar cartão para pagamentos</h1>
    <p>Use este formulário para associar um cartão de crédito seguro à sua conta Ze.EFE. Os dados do cartão são processados e armazenados pela Stripe; guardamos apenas as informações necessárias para identificar o cartão nas próximas cobranças.</p>
    <form id="cardSaveForm">
      <div>
        <label for="cardClientId">Código do cliente</label>
        <input type="number" id="cardClientId" name="client_id" min="1" placeholder="Ex: 42" required />
        <p class="card-help">Este código aparece no Portal do Cliente ou é enviado no link recebido por e-mail.</p>
      </div>
      <div>
        <label for="cardHolderName">Nome impresso no cartão</label>
        <input type="text" id="cardHolderName" name="cardholder" placeholder="Nome do titular" autocomplete="cc-name" required />
      </div>
      <div>
        <label for="stripeCardElement">Dados do cartão</label>
        <div id="stripeCardElement" class="stripe-field"></div>
      </div>
      <div id="cardErrors" class="card-status error" role="alert" aria-live="assertive"></div>
      <button type="submit" class="btn btn-primary" id="cardSubmitBtn">Salvar cartão</button>
      <div id="cardSaveMessage" class="card-status success" role="status" aria-live="polite"></div>
    </form>
  </main>

  <section class="card-form card-list-card" id="cardListSection" hidden>
    <h2>Cartões cadastrados</h2>
    <ul id="cardList" class="card-list">
      <li>Informe o código do cliente para listar os cartões vinculados.</li>
    </ul>
  </section>

  <script src="https://js.stripe.com/v3/"></script>
  <script src="scripts/clientes.js" defer></script>
</body>
</html>
