<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ze.EFE - Marca l√°!</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="client-portal-page client-logged-out">
  <header class="header">
    <div class="brand">
      <img src="img/logo.jpg" alt="Ze.EFE" class="brand-logo" />
      <span class="prelaunch-badge">Pr√©-lan√ßamento</span>
    </div>
    <nav>
      <a href="index.html">In√≠cio</a>
      <a href="salas.html">Salas</a>
      <a href="pre-reserva.html">Pr√©-Reserva</a>
      <a href="clientes.html" aria-current="page">√Årea do Cliente</a>
      <a href="anunciante.html">Anunciante</a>
    </nav>
  </header>

  <main class="client-portal">
    <section id="authContainer" class="auth-container">
      <div id="authLogin" class="auth-screen">
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Portal do Cliente<br><span>Ze.EFE</span></h2>
          <div class="scope-pill" style="display:flex; gap:8px; justify-content:center; margin:8px 0 12px;">
            <button type="button" id="authScopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
            <button type="button" id="authScopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company">Empresa</button>
          </div>
          <form id="portalLoginForm" autocomplete="on">
            <input type="text" id="portalLoginIdentifier" name="identifier" placeholder="Login, e-mail ou CPF" required autocomplete="username" />
            <input type="password" id="portalLoginPassword" name="password" placeholder="Senha" required autocomplete="current-password" />
            <div class="remember-line">
              <label class="remember">
                <input type="checkbox" id="portalRememberMe" />
                <span>Lembrar login neste computador</span>
              </label>
            </div>
            <button class="btn btn-primary" type="submit">Entrar</button>
          </form>
          <div class="auth-quick-actions" id="authActions">
            <button type="button" class="ghost-btn" data-view="recovery">Esqueci minha senha</button>
            <button type="button" class="ghost-btn" data-view="register">Quero me cadastrar</button>
          </div>
        </div>
      </div>

      <div id="authRegister" class="auth-screen" hidden>
        <div class="login-card register-card">
          <div class="register-hero">
            <img src="img/logo.jpg" alt="Ze.EFE">
            <h2>Criar acesso<br><span>Portal do Cliente</span></h2>
          </div>
          <form id="portalRegisterForm" class="auth-form auth-form-grid" autocomplete="on">
            <div class="form-field">
              <label for="registerName">Nome completo</label>
              <input type="text" id="registerName" name="name" required />
            </div>
            <div class="form-field">
              <label for="registerEmail">E-mail</label>
              <input type="email" id="registerEmail" name="email" required autocomplete="email" />
              <small class="input-hint">Use este e-mail ou CPF para acessar o portal.</small>
            </div>
            <div class="form-field">
              <label for="registerCpf">CPF</label>
              <input type="text" id="registerCpf" name="cpf" maxlength="14" required autocomplete="off" />
              <small class="input-hint" id="cpfHint">Informe os 11 d√≠gitos do CPF.</small>
            </div>
            <div class="form-field">
              <label for="registerPhone">Telefone (opcional)</label>
              <input type="text" id="registerPhone" name="phone" maxlength="15" autocomplete="tel" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPassword">Senha</label>
              <input type="password" id="registerPassword" name="password" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPasswordConfirm">Confirmar senha</label>
              <input type="password" id="registerPasswordConfirm" name="password_confirm" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-full password-indicators" id="passwordIndicators">
              <span class="password-indicator state-neutral" data-password-strength>For√ßa da senha: aguardando</span>
              <span class="password-indicator state-neutral" data-password-match>Confirma√ß√£o: aguardando</span>
            </div>
            <div class="form-field form-field-full">
              <p class="password-hint" id="passwordHint">
                A senha deve conter no m√≠nimo 8 caracteres, incluindo letras, n√∫meros e s√≠mbolos.
              </p>
            </div>
            <div class="form-field form-field-full">
              <button class="btn btn-primary" type="submit">Concluir cadastro</button>
            </div>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authRecovery" class="auth-screen" hidden>
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Recuperar acesso<br><span>Portal do Cliente</span></h2>
          <form id="portalRecoveryForm" class="auth-form" autocomplete="on">
            <div class="form-field">
              <label for="recoveryLogin">Login ou e-mail cadastrado</label>
              <input type="text" id="recoveryLogin" name="login" required autocomplete="username" />
            </div>
            <p class="rooms-message">Enviaremos uma senha tempor√°ria para o e-mail registrado.</p>
            <button class="btn btn-primary" type="submit">Enviar nova senha</button>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authMessage" class="rooms-message auth-message"></div>
    </section>

    <section id="clientPanels" class="portal-shell" hidden>
      <aside class="portal-nav">
        <div class="portal-nav-brand">
          <img src="img/logo.jpg" alt="Ze.EFE" />
          <h2>Gest√£o do Cliente</h2>
        </div>
        <nav class="portal-nav-links">
          <button type="button" data-panel="book" class="active">Reservar</button>
          <button type="button" data-panel="reservations">Minhas Reservas</button>
          <button type="button" data-panel="visitors">Visitantes</button>
          <button type="button" data-panel="company" id="companyTab" hidden>Empresa</button>
          <button type="button" data-panel="payments">Formas de Pagamento</button>
          <button type="button" data-panel="profile">Meu Perfil</button>
        </nav>
        <button type="button" id="logoutBtn" class="nav-logout">Sair</button>
      </aside>

      <div class="portal-main">
        <header class="portal-header">
          <div>
            <h2>Ol√°, <span id="clientName"></span></h2>
            <div id="clientCompany" class="portal-subtitle"></div>
          </div>
          <div class="portal-scope-switch">
            <div class="scope-pill">
              <button type="button" id="scopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
              <button type="button" id="scopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company" hidden>Empresa</button>
            </div>
          </div>
          <div class="portal-actions">
            <a class="btn btn-secondary" href="pre-reserva.html">Pr√©-reserva</a>
            <button class="btn btn-secondary" type="button" id="refreshBtn">Atualizar</button>
          </div>
        </header>

        <div class="portal-content">
          <div id="panel-book" class="portal-section">
            <article class="form-card booking-card">
              <h3 id="bookingFormTitle">Reservar uma sala</h3>
              <form id="reservationBookForm">
                <input type="hidden" name="id" />
                <input type="hidden" name="room_id" id="bookingRoomId" />
                <input type="hidden" name="time_start" value="08:00" />
                <input type="hidden" name="time_end" value="20:00" />

                <div class="booking-stepper">
                  <div class="booking-stepper-item active" data-step-index="0">
                    <span>1</span>
                    <strong>Data</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="1">
                    <span>2</span>
                    <strong>Salas</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="2">
                    <span>3</span>
                    <strong>Detalhes</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="3">
                    <span>4</span>
                    <strong>Visitantes</strong>
                  </div>
                </div>

                <section class="booking-step" data-step-index="0">
                  <div class="booking-calendar">
                    <header class="calendar-header">
                      <button type="button" id="bookingPrevMonth" aria-label="M√™s anterior">&#10094;</button>
                      <div id="bookingCalendarLabel"></div>
                      <button type="button" id="bookingNextMonth" aria-label="Pr√≥ximo m√™s">&#10095;</button>
                    </header>
                    <div class="calendar-grid" id="bookingCalendarGrid" role="grid" aria-labelledby="bookingCalendarLabel"></div>
                    <input type="hidden" id="bookingDateInput" name="date" required />
                  </div>
                  <p class="form-help fixed-schedule-note">Selecione um dia dispon√≠vel. Reservas s√£o di√°rias entre 08:00 e 20:00.</p>
                </section>

                <section class="booking-step" data-step-index="1" hidden>
                  <h4>Salas dispon√≠veis</h4>
                  <p class="form-help">Selecione uma sala dispon√≠vel para a data escolhida.</p>
                  <div id="bookingRoomOptions" class="booking-room-options"></div>
                  <div id="bookingRoomFeedback" class="rooms-message"></div>
                </section>

                <section class="booking-step" data-step-index="2" hidden>
                  <div class="form-row">
                    <label for="bookingTitleInput">T√≠tulo</label>
                    <input type="text" id="bookingTitleInput" name="title" maxlength="120" required />
                  </div>
                  <div class="form-row" id="companyBookingRow" hidden>
                    <label class="form-label" style="display:flex; align-items:center; gap:10px">
                      <input type="checkbox" id="bookingCompanyToggle" />
                      Reserva pela empresa
                    </label>
                  </div>
                  <div class="form-row">
                    <label for="bookingDescriptionInput">Descri√ß√£o / Observa√ß√µes</label>
                    <textarea id="bookingDescriptionInput" name="description" rows="3"></textarea>
                  </div>
                </section>

                <section class="booking-step" data-step-index="3" hidden>
                  <div class="form-row">
                    <label class="form-label">Visitantes</label>
                    <div class="visitor-multiselect" id="bookingVisitorSelector"></div>
                  </div>
                  <div class="form-row visitor-actions">
                    <label>
                      <input type="checkbox" name="send_invites" checked>
                      Enviar convite por e-mail aos visitantes selecionados
                    </label>
                    <button type="button" class="btn btn-secondary btn-sm" id="openVisitorsPanel">Gerenciar visitantes</button>
                  </div>
                </section>

                <div class="booking-navigation">
                  <button type="button" class="btn btn-secondary" id="bookingPrevBtn" hidden>Voltar</button>
                  <button type="button" class="btn btn-primary" id="bookingNextBtn">Avan√ßar</button>
                  <button class="btn btn-primary" type="submit" id="bookingSubmitBtn" hidden>Solicitar reserva</button>
                  <button class="btn btn-secondary" type="button" id="cancelReservationEdit" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="bookingMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-reservations" class="portal-section" hidden>
            <section class="client-lists">
              <article>
                <div class="list-header">
                  <h3>Minhas Reservas</h3>
                  <button class="btn btn-secondary" type="button" id="newReservationBtn">Nova reserva</button>
                </div>
                <div id="reservationsContainer" class="responsive-table"></div>
              </article>
            </section>
          </div>

          <div id="panel-visitors" class="portal-section" hidden>
            <section class="client-lists visitors-layout">
              <article class="visitor-list-card">
                <div class="list-header">
                  <h3>Visitantes</h3>
                  <button class="btn btn-secondary" type="button" id="newVisitorBtn">Novo</button>
                </div>
                <div id="visitorsContainer" class="responsive-table"></div>
              </article>

              <article class="form-card visitor-form-card is-collapsed" id="visitorFormWrapper" hidden>
                <h3 id="visitorFormTitle">Novo Visitante</h3>
                <form id="visitorForm">
                  <input type="hidden" name="id" />
                  <div class="form-row">
                    <label>Nome completo</label>
                    <input type="text" name="name" required />
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>CPF</label>
                      <input type="text" name="cpf" maxlength="14" />
                    </div>
                    <div>
                      <label>RG</label>
                      <input type="text" name="rg" />
                    </div>
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>E-mail</label>
                      <input type="email" name="email" />
                    </div>
                    <div>
                      <label>Telefone</label>
                      <input type="text" name="phone" maxlength="15" />
                    </div>
                    <div>
                      <label>WhatsApp</label>
                      <input type="text" name="whatsapp" maxlength="15" />
                    </div>
                  </div>
                  <div class="form-row">
                    <label>Status</label>
                    <select name="status">
                      <option value="ativo">Ativo</option>
                      <option value="inativo">Inativo</option>
                    </select>
                  </div>
                  <div class="form-row">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <button class="btn btn-secondary" type="button" id="cancelVisitorEdit" hidden>Cancelar</button>
                  </div>
                </form>
              </article>
            </section>
          </div>

          <div id="panel-company" class="portal-section" hidden>
            <section class="client-lists">
              <article class="form-card">
                <div class="list-header" style="gap:8px; align-items:center">
                  <h3 style="margin-right:auto">Empresa</h3>
                  <div class="tabline" id="companyTabs" style="display:flex; gap:6px">
                    <button class="btn btn-secondary btn-sm company-tab active" data-company-tab="overview">Vis√£o Geral</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="users">Membros</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="reservations">Reservas</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="finance">Financeiro</button>
                  </div>
                </div>

                <div id="companyTab-overview" class="company-panel">
                  <div class="grid-cards-3 stats-cards" id="companyOverview">
                    <div class="stat-card">
                      <div class="stat-icon" aria-hidden="true">üìå</div>
                      <div class="stat-text">
                        <span class="stat-label">Reservas ativas</span>
                        <span class="stat-value" id="coActive">‚Äî</span>
                      </div>
                    </div>
                    <div class="stat-card">
                      <div class="stat-icon" aria-hidden="true">üìÖ</div>
                      <div class="stat-text">
                        <span class="stat-label">Pr√≥ximos 7 dias</span>
                        <span class="stat-value" id="coNext">‚Äî</span>
                      </div>
                    </div>
                    <div class="stat-card">
                      <div class="stat-icon" aria-hidden="true">üí≥</div>
                      <div class="stat-text">
                        <span class="stat-label">Pagamentos pendentes</span>
                        <span class="stat-value" id="coPay">‚Äî</span>
                      </div>
                    </div>
                  </div>
                  <div class="overview-split">
                    <div class="overview-box">
                      <h4>Pr√≥ximas reservas</h4>
                      <div id="companyOverviewNext" class="list-next"></div>
                    </div>
                    <div class="overview-box">
                      <h4>A√ß√µes r√°pidas</h4>
                      <div class="quick-actions">
                        <button class="btn btn-secondary btn-sm" type="button" data-panel="reservations">Ver reservas</button>
                        <button class="btn btn-secondary btn-sm" type="button" data-panel="users">Convidar membro</button>
                        <button class="btn btn-secondary btn-sm" type="button" data-panel="finance">Financeiro</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="companyTab-users" class="company-panel" hidden>
                  <div class="member-actions" id="companyMembersActions">
                    <div class="company-action-cards">
                      <button type="button" class="action-card" id="openInviteModal">
                        <span class="icon">üîç</span>
                        <span class="label">Convidar membro</span>
                      </button>
                      <button type="button" class="action-card" id="openManualModal">
                        <span class="icon">‚úçÔ∏è</span>
                        <span class="label">Adicionar manualmente</span>
                      </button>
                      <button type="button" class="action-card" id="openImportModal">
                        <span class="icon">üì•</span>
                        <span class="label">Importar contatos</span>
                      </button>
                      <button type="button" class="action-card" id="openManageInvites">
                        <span class="icon">üóÇÔ∏è</span>
                        <span class="label">Gerenciar convites</span>
                      </button>
                    </div>
                    <input type="file" id="companyXlsxInput" accept=".xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" hidden>
                  </div>

                  <section class="card-block">
                    <h4>Membros</h4>
                    <div id="companyUsersContainer" class="responsive-table"></div>
                  </section>

                  <section class="card-block" id="companyInvitesBlock" hidden>
                    <div class="list-header" style="gap:8px; align-items:center">
                      <h4 style="margin-right:auto">Convites</h4>
                      <button class="btn btn-secondary btn-sm" type="button" id="companyInvitesClose">Fechar</button>
                    </div>
                    <div id="companyInvitesContainer" class="responsive-table"></div>
                  </section>
                </div>

                <div id="companyTab-reservations" class="company-panel" hidden>
                  <div id="companyReservationsContainer" class="responsive-table"></div>
                </div>

                <div id="companyTab-finance" class="company-panel" hidden>
                  <div class="finance-filters">
                    <div class="preset-row">
                      <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="30">√öltimos 30 dias</button>
                      <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="60">60 dias</button>
                      <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="90">90 dias</button>
                      <span class="chip">ou</span>
                      <label>De <input type="date" id="finFrom"></label>
                      <label>At√© <input type="date" id="finTo"></label>
                      <button type="button" class="btn btn-secondary btn-sm" id="finApply">Aplicar</button>
                    </div>
                    <small class="form-help">Per√≠odo personalizado com limite m√°ximo de 6 meses.</small>
                  </div>
                  <div id="companyFinanceContainer" class="responsive-table"></div>
                </div>
              </article>
            </section>
          </div>

          <!-- Modal de pr√©-visualiza√ß√£o do XLSX -->
          <div class="modal-overlay" id="xlsxPreviewModal" aria-hidden="true">
            <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="xlsxPreviewTitle">
              <button class="modal-close" type="button" id="xlsxPreviewClose" aria-label="Fechar">&times;</button>
              <div class="modal-body">
                <div class="modal-info" style="padding:24px; width:100%">
                  <h2 id="xlsxPreviewTitle" style="margin-top:0">Pr√©‚Äëvisualiza√ß√£o da importa√ß√£o</h2>
                  <p class="rooms-message">Revise as linhas detectadas. Linhas inv√°lidas aparecem destacadas e n√£o ser√£o importadas.</p>
                  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                    <div class="rooms-message" style="margin:0;">Voc√™ pode editar os campos antes de importar.</div>
                    <div style="display:flex; gap:8px;">
                      <button type="button" class="btn btn-secondary btn-sm" id="xlsxPreviewAdd">Adicionar linha</button>
                    </div>
                  </div>
                  <div id="xlsxPreviewTable" class="responsive-table"></div>
                  <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
                    <button type="button" class="btn btn-secondary" id="xlsxPreviewCancel">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="xlsxPreviewConfirm">Importar selecionados</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="panel-profile" class="portal-section" hidden>
            <article class="form-card profile-card">
              <h3>Dados do Cliente</h3>
              <form id="profileForm" class="profile-form">
                <div class="form-grid-mini">
                  <div>
                    <label for="profileNameInput">Nome completo</label>
                    <input type="text" id="profileNameInput" name="name" required readonly />
                  </div>
                  <div>
                    <label for="profileLoginInput">Login</label>
                    <input type="text" id="profileLoginInput" name="login" required readonly />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileEmailInput">E-mail</label>
                    <input type="email" id="profileEmailInput" name="email" readonly data-immutable="true" />
                  </div>
                  <div>
                    <label for="profileCpfInput">CPF</label>
                    <input type="text" id="profileCpfInput" name="cpf" readonly data-immutable="true" />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profilePhoneInput">Telefone</label>
                    <input type="text" id="profilePhoneInput" name="phone" maxlength="15" readonly />
                  </div>
                  <div>
                    <label for="profileWhatsappInput">WhatsApp</label>
                    <input type="text" id="profileWhatsappInput" name="whatsapp" maxlength="15" readonly />
                  </div>
                </div>
                <div class="form-row">
                  <label for="profileCompanyInput">Empresa</label>
                  <input type="text" id="profileCompanyInput" class="input-readonly" readonly data-immutable="true" />
                </div>
                <p class="form-help">E-mail e CPF s√£o definidos no cadastro inicial e n√£o podem ser alterados pelo portal.</p>
                <div class="form-row profile-actions">
                  <button type="button" class="btn btn-secondary" id="editProfileBtn">Editar dados</button>
                  <button type="submit" class="btn btn-primary" id="saveProfileBtn" hidden>Salvar altera√ß√µes</button>
                  <button type="button" class="btn btn-secondary" id="cancelProfileEditBtn" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="profileMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-payments" class="portal-section" hidden>
            <article class="form-card payments-card">
              <div class="icon-placeholder">üí≥</div>
              <h3>Formas de Pagamento</h3>
              <p class="rooms-message">P√°gina em constru√ß√£o. Em breve voc√™ poder√° cadastrar cart√µes de cr√©dito e outros m√©todos de pagamento neste portal.</p>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Contato: contato@zeefe.com | (11) 1234-5678</p>
    <p>Endere√ßo: Moema, S√£o Paulo - SP</p>
    <p><a href="#">Instagram</a> | <a href="#">LinkedIn</a></p>
    <p>¬© 2025 Ze.EFE - Todos os direitos reservados</p>
  </footer>

  <!-- Modal de a√ß√µes da reserva -->
  <div class="modal-overlay" id="reservationActionsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="reservationActionsTitle">
      <button class="modal-close" type="button" id="reservationActionsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="reservationActionsTitle" style="margin-top:0">A√ß√µes da reserva</h2>
          <p id="reservationActionsMeta" class="rooms-message"></p>
          <div id="reservationActionsButtons" class="actions-grid"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Chat com o anunciante (cliente) -->
  <div class="modal-overlay chat-drawer" id="clientChatModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="clientChatTitle">
      <button class="modal-close" type="button" id="clientChatClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="clientChatTitle" style="margin-top:0">Mensagens</h2>
          <div id="clientChatHeader" class="rooms-message" style="margin-bottom:8px"></div>
          <div id="clientChatMessages" class="chat-messages"></div>
          <form id="clientChatForm" class="chat-form">
            <input type="text" id="clientChatInput" placeholder="Digite uma mensagem" style="flex:1" />
            <button class="btn btn-primary" type="submit">Enviar</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Convidar membro -->
  <div class="modal-overlay" id="inviteMemberModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="inviteMemberTitle">
      <button class="modal-close" type="button" id="inviteMemberClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="inviteMemberTitle" style="margin-top:0">Convidar membro</h2>
          <p class="rooms-message" style="margin-top:4px;margin-bottom:12px;">
            A busca ser√° realizada entre os usu√°rios j√° cadastrados na plataforma Ze.EFE. Se n√£o encontrado, enviaremos um convite de pr√©‚Äëcadastro com os dados informados.
          </p>
          <div class="form-grid-mini">
            <div>
              <label for="inviteCpf">CPF</label>
              <input type="text" id="inviteCpf" maxlength="14" placeholder="Somente n√∫meros" />
            </div>
            <div>
              <label for="inviteEmail">E-mail</label>
              <input type="email" id="inviteEmail" placeholder="Opcional para reenviar" />
            </div>
            <div>
              <label for="inviteRole">Papel</label>
              <select id="inviteRole">
                <option value="membro">Membro</option>
                <option value="gestor">Gestor</option>
                <option value="leitor">Leitor</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </div>
          <div class="form-row" style="display:flex; gap:8px; align-items:center;">
            <button class="btn btn-secondary" type="button" id="inviteLookupBtn">Buscar</button>
            <span id="inviteLookupResult" class="rooms-message"></span>
          </div>
          <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
            <button type="button" class="btn btn-secondary" id="inviteMemberCancel">Cancelar</button>
            <button type="button" class="btn btn-primary" id="inviteMemberSend">Enviar convite</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Adicionar manualmente -->
  <div class="modal-overlay" id="manualMembersModal" aria-hidden="true">
    <div class="modal-dialog wide" role="dialog" aria-modal="true" aria-labelledby="manualMembersTitle">
      <button class="modal-close" type="button" id="manualMembersClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="manualMembersTitle" style="margin-top:0">Adicionar membros manualmente</h2>
          <p class="rooms-message" style="margin-top:4px;margin-bottom:12px;">
            Usu√°rios j√° cadastrados na Ze.EFE ser√£o adicionados √† empresa. Para e‚Äëmails/CPFs n√£o encontrados, enviaremos um convite de pr√©‚Äëcadastro para que concluam o registro e passem a fazer parte da empresa.
          </p>
          <div class="responsive-table manual-table-wrap">
            <table class="table manual-members-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>E-mail</th>
                  <th>CPF</th>
                  <th>Papel</th>
                </tr>
              </thead>
              <tbody id="manualMembersTBody"></tbody>
            </table>
          </div>
          <div style="display:flex; gap:8px; justify-content:space-between; margin-top:10px;">
            <button type="button" class="btn btn-secondary btn-sm" id="manualAddRow">Adicionar linha</button>
            <div>
              <button type="button" class="btn btn-secondary" id="manualMembersCancel">Cancelar</button>
              <button type="button" class="btn btn-primary" id="manualMembersSubmit">Enviar convites</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Importar contatos -->
  <div class="modal-overlay" id="importContactsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="importContactsTitle">
      <button class="modal-close" type="button" id="importContactsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="importContactsTitle" style="margin-top:0">Importar contatos</h2>
          <p class="rooms-message">Baixe o modelo, preencha at√© 50 linhas (Nome, E‚Äëmail, CPF) e importe para revisar e enviar convites.</p>
          <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
            <a class="btn btn-secondary" href="api/company_members_template_xlsx.php">Baixar modelo XLSX</a>
            <button type="button" class="btn btn-primary" id="importPickFile">Selecionar arquivo</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de edi√ß√£o de perfil -->
  <div class="modal-overlay" id="profileEditModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="profileEditTitle">
      <button class="modal-close" type="button" id="profileEditClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="profileEditTitle" style="margin-top:0">Editar perfil</h2>
          <form id="profileEditForm" class="profile-edit-form">
            <div class="form-grid-mini">
              <div>
                <label for="editName">Nome completo</label>
                <input type="text" id="editName" name="name" required />
              </div>
              <div>
                <label for="editLogin">Login</label>
                <input type="text" id="editLogin" name="login" required />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editEmail">E-mail</label>
                <input type="email" id="editEmail" name="email" readonly />
              </div>
              <div>
                <label for="editCpf">CPF</label>
                <input type="text" id="editCpf" name="cpf" readonly />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editPhone">Telefone</label>
                <input type="text" id="editPhone" name="phone" maxlength="15" />
              </div>
              <div>
                <label for="editWhatsapp">WhatsApp</label>
                <input type="text" id="editWhatsapp" name="whatsapp" maxlength="15" />
              </div>
            </div>

            <fieldset class="password-change">
              <legend>Alterar senha</legend>
              <div class="form-grid-mini">
                <div>
                  <label for="currentPassword">Senha atual</label>
                  <input type="password" id="currentPassword" autocomplete="current-password" />
                </div>
                <div>
                  <label for="newPassword">Nova senha</label>
                  <input type="password" id="newPassword" autocomplete="new-password" />
                </div>
              </div>
              <div class="form-grid-mini">
                <div>
                  <label for="newPasswordConfirm">Confirmar nova senha</label>
                  <input type="password" id="newPasswordConfirm" autocomplete="new-password" />
                </div>
                <div class="password-indicators inline">
                  <span class="password-indicator state-neutral" id="pwdStrengthIndicator">For√ßa da senha: aguardando</span>
                  <span class="password-indicator state-neutral" id="pwdMatchIndicator">Confirma√ß√£o: aguardando</span>
                </div>
              </div>
              <p class="password-hint">A senha deve ter 8+ caracteres com letras, n√∫meros e s√≠mbolos.</p>
            </fieldset>

            <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
              <button type="button" class="btn btn-secondary" id="profileEditCancel">Cancelar</button>
              <button type="submit" class="btn btn-primary">Salvar</button>
            </div>
            <div class="form-row"><div id="profileEditMessage" class="rooms-message"></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Convites pendentes (inbox) -->
  <div class="modal-overlay" id="inviteInboxModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="inviteInboxTitle">
      <button class="modal-close" type="button" id="inviteInboxClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="inviteInboxTitle" style="margin-top:0">Convites para empresas</h2>
          <p class="rooms-message">Voc√™ recebeu convites para participar de empresas. Aceite para ter acesso √†s funcionalidades de gest√£o.</p>
          <div id="inviteInboxList" class="inbox-list"></div>
          <div class="modal-actions" style="display:flex; gap:12px; justify-content:flex-end; margin-top:12px;">
            <button type="button" class="btn btn-secondary" id="inviteInboxDismiss">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/clientes.js" defer></script>
</body>
</html>
