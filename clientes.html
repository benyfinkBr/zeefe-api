<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ze.EFE - Marca l√°!</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="client-portal-page client-logged-out">
  <header class="header">
    <div class="brand">
      <img src="img/logo.jpg" alt="Ze.EFE" class="brand-logo" />
      <span class="prelaunch-badge">Pr√©-lan√ßamento</span>
    </div>
    <nav>
      <a href="index.html">In√≠cio</a>
      <a href="salas.html">Salas</a>
      <a href="pre-reserva.html">Pr√©-Reserva</a>
      <a href="clientes.html" aria-current="page">√Årea do Cliente</a>
    </nav>
  </header>

  <main class="client-portal">
    <section id="authContainer" class="auth-container">
      <div id="authLogin" class="auth-screen">
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Portal do Cliente<br><span>Ze.EFE</span></h2>
          <div class="scope-pill" style="display:flex; gap:8px; justify-content:center; margin:8px 0 12px;">
            <button type="button" id="authScopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
            <button type="button" id="authScopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company">Empresa</button>
          </div>
          <form id="portalLoginForm" autocomplete="on">
            <input type="text" id="portalLoginIdentifier" name="identifier" placeholder="Login, e-mail ou CPF" required autocomplete="username" />
            <input type="password" id="portalLoginPassword" name="password" placeholder="Senha" required autocomplete="current-password" />
            <div class="remember-line">
              <label class="remember">
                <input type="checkbox" id="portalRememberMe" />
                <span>Lembrar login neste computador</span>
              </label>
            </div>
            <button class="btn btn-primary" type="submit">Entrar</button>
          </form>
          <div class="auth-quick-actions" id="authActions">
            <button type="button" class="ghost-btn" data-view="recovery">Esqueci minha senha</button>
            <button type="button" class="ghost-btn" data-view="register">Quero me cadastrar</button>
          </div>
        </div>
      </div>

      <div id="authRegister" class="auth-screen" hidden>
        <div class="login-card register-card">
          <div class="register-hero">
            <img src="img/logo.jpg" alt="Ze.EFE">
            <h2>Criar acesso<br><span>Portal do Cliente</span></h2>
          </div>
          <form id="portalRegisterForm" class="auth-form auth-form-grid" autocomplete="on">
            <div class="form-field">
              <label for="registerName">Nome completo</label>
              <input type="text" id="registerName" name="name" required />
            </div>
            <div class="form-field">
              <label for="registerEmail">E-mail</label>
              <input type="email" id="registerEmail" name="email" required autocomplete="email" />
              <small class="input-hint">Use este e-mail ou CPF para acessar o portal.</small>
            </div>
            <div class="form-field">
              <label for="registerCpf">CPF</label>
              <input type="text" id="registerCpf" name="cpf" maxlength="14" required autocomplete="off" />
              <small class="input-hint" id="cpfHint">Informe os 11 d√≠gitos do CPF.</small>
            </div>
            <div class="form-field">
              <label for="registerPhone">Telefone (opcional)</label>
              <input type="text" id="registerPhone" name="phone" maxlength="15" autocomplete="tel" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPassword">Senha</label>
              <input type="password" id="registerPassword" name="password" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPasswordConfirm">Confirmar senha</label>
              <input type="password" id="registerPasswordConfirm" name="password_confirm" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-full password-indicators" id="passwordIndicators">
              <span class="password-indicator state-neutral" data-password-strength>For√ßa da senha: aguardando</span>
              <span class="password-indicator state-neutral" data-password-match>Confirma√ß√£o: aguardando</span>
            </div>
            <div class="form-field form-field-full">
              <p class="password-hint" id="passwordHint">
                A senha deve conter no m√≠nimo 8 caracteres, incluindo letras, n√∫meros e s√≠mbolos.
              </p>
            </div>
            <div class="form-field form-field-full">
              <button class="btn btn-primary" type="submit">Concluir cadastro</button>
            </div>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authRecovery" class="auth-screen" hidden>
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Recuperar acesso<br><span>Portal do Cliente</span></h2>
          <form id="portalRecoveryForm" class="auth-form" autocomplete="on">
            <div class="form-field">
              <label for="recoveryLogin">Login ou e-mail cadastrado</label>
              <input type="text" id="recoveryLogin" name="login" required autocomplete="username" />
            </div>
            <p class="rooms-message">Enviaremos uma senha tempor√°ria para o e-mail registrado.</p>
            <button class="btn btn-primary" type="submit">Enviar nova senha</button>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authMessage" class="rooms-message auth-message"></div>
    </section>

    <section id="clientPanels" class="portal-shell" hidden>
      <aside class="portal-nav">
        <div class="portal-nav-brand">
          <img src="img/logo.jpg" alt="Ze.EFE" />
          <h2>Gest√£o do Cliente</h2>
        </div>
        <nav class="portal-nav-links">
          <button type="button" data-panel="book" class="active">Reservar</button>
          <button type="button" data-panel="reservations">Minhas Reservas</button>
          <button type="button" data-panel="visitors">Visitantes</button>
          <button type="button" data-panel="company" id="companyTab" hidden>Empresa</button>
          <button type="button" data-panel="payments">Formas de Pagamento</button>
          <button type="button" data-panel="profile">Meu Perfil</button>
        </nav>
        <button type="button" id="logoutBtn" class="nav-logout">Sair</button>
      </aside>

      <div class="portal-main">
        <header class="portal-header">
          <div>
            <h2>Ol√°, <span id="clientName"></span></h2>
            <div id="clientCompany" class="portal-subtitle"></div>
          </div>
          <div class="portal-scope-switch">
            <div class="scope-pill">
              <button type="button" id="scopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
              <button type="button" id="scopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company" hidden>Empresa</button>
            </div>
          </div>
          <div class="portal-actions">
            <a class="btn btn-secondary" href="pre-reserva.html">Pr√©-reserva</a>
            <button class="btn btn-secondary" type="button" id="refreshBtn">Atualizar</button>
          </div>
        </header>

        <div class="portal-content">
          <div id="panel-book" class="portal-section">
            <article class="form-card booking-card">
              <h3 id="bookingFormTitle">Reservar uma sala</h3>
              <form id="reservationBookForm">
                <input type="hidden" name="id" />
                <input type="hidden" name="room_id" id="bookingRoomId" />
                <input type="hidden" name="time_start" value="08:00" />
                <input type="hidden" name="time_end" value="20:00" />

                <div class="booking-stepper">
                  <div class="booking-stepper-item active" data-step-index="0">
                    <span>1</span>
                    <strong>Data</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="1">
                    <span>2</span>
                    <strong>Salas</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="2">
                    <span>3</span>
                    <strong>Detalhes</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="3">
                    <span>4</span>
                    <strong>Visitantes</strong>
                  </div>
                </div>

                <section class="booking-step" data-step-index="0">
                  <div class="booking-calendar">
                    <header class="calendar-header">
                      <button type="button" id="bookingPrevMonth" aria-label="M√™s anterior">&#10094;</button>
                      <div id="bookingCalendarLabel"></div>
                      <button type="button" id="bookingNextMonth" aria-label="Pr√≥ximo m√™s">&#10095;</button>
                    </header>
                    <div class="calendar-grid" id="bookingCalendarGrid" role="grid" aria-labelledby="bookingCalendarLabel"></div>
                    <input type="hidden" id="bookingDateInput" name="date" required />
                  </div>
                  <p class="form-help fixed-schedule-note">Selecione um dia dispon√≠vel. Reservas s√£o di√°rias entre 08:00 e 20:00.</p>
                </section>

                <section class="booking-step" data-step-index="1" hidden>
                  <h4>Salas dispon√≠veis</h4>
                  <p class="form-help">Selecione uma sala dispon√≠vel para a data escolhida.</p>
                  <div id="bookingRoomOptions" class="booking-room-options"></div>
                  <div id="bookingRoomFeedback" class="rooms-message"></div>
                </section>

                <section class="booking-step" data-step-index="2" hidden>
                  <div class="form-row">
                    <label for="bookingTitleInput">T√≠tulo</label>
                    <input type="text" id="bookingTitleInput" name="title" maxlength="120" required />
                  </div>
                  <div class="form-row">
                    <label for="bookingDescriptionInput">Descri√ß√£o / Observa√ß√µes</label>
                    <textarea id="bookingDescriptionInput" name="description" rows="3"></textarea>
                  </div>
                </section>

                <section class="booking-step" data-step-index="3" hidden>
                  <div class="form-row">
                    <label class="form-label">Visitantes</label>
                    <div class="visitor-multiselect" id="bookingVisitorSelector"></div>
                  </div>
                  <div class="form-row visitor-actions">
                    <label>
                      <input type="checkbox" name="send_invites" checked>
                      Enviar convite por e-mail aos visitantes selecionados
                    </label>
                    <button type="button" class="btn btn-secondary btn-sm" id="openVisitorsPanel">Gerenciar visitantes</button>
                  </div>
                </section>

                <div class="booking-navigation">
                  <button type="button" class="btn btn-secondary" id="bookingPrevBtn" hidden>Voltar</button>
                  <button type="button" class="btn btn-primary" id="bookingNextBtn">Avan√ßar</button>
                  <button class="btn btn-primary" type="submit" id="bookingSubmitBtn" hidden>Solicitar reserva</button>
                  <button class="btn btn-secondary" type="button" id="cancelReservationEdit" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="bookingMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-reservations" class="portal-section" hidden>
            <section class="client-lists">
              <article>
                <div class="list-header">
                  <h3>Minhas Reservas</h3>
                  <button class="btn btn-secondary" type="button" id="newReservationBtn">Nova reserva</button>
                </div>
                <div id="reservationsContainer" class="responsive-table"></div>
              </article>
            </section>
          </div>

          <div id="panel-visitors" class="portal-section" hidden>
            <section class="client-lists visitors-layout">
              <article class="visitor-list-card">
                <div class="list-header">
                  <h3>Visitantes</h3>
                  <button class="btn btn-secondary" type="button" id="newVisitorBtn">Novo</button>
                </div>
                <div id="visitorsContainer" class="responsive-table"></div>
              </article>

              <article class="form-card visitor-form-card is-collapsed" id="visitorFormWrapper" hidden>
                <h3 id="visitorFormTitle">Novo Visitante</h3>
                <form id="visitorForm">
                  <input type="hidden" name="id" />
                  <div class="form-row">
                    <label>Nome completo</label>
                    <input type="text" name="name" required />
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>CPF</label>
                      <input type="text" name="cpf" maxlength="14" />
                    </div>
                    <div>
                      <label>RG</label>
                      <input type="text" name="rg" />
                    </div>
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>E-mail</label>
                      <input type="email" name="email" />
                    </div>
                    <div>
                      <label>Telefone</label>
                      <input type="text" name="phone" maxlength="15" />
                    </div>
                    <div>
                      <label>WhatsApp</label>
                      <input type="text" name="whatsapp" maxlength="15" />
                    </div>
                  </div>
                  <div class="form-row">
                    <label>Status</label>
                    <select name="status">
                      <option value="ativo">Ativo</option>
                      <option value="inativo">Inativo</option>
                    </select>
                  </div>
                  <div class="form-row">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <button class="btn btn-secondary" type="button" id="cancelVisitorEdit" hidden>Cancelar</button>
                  </div>
                </form>
              </article>
            </section>
          </div>

          <div id="panel-company" class="portal-section" hidden>
            <section class="client-lists">
              <article class="form-card">
                <div class="list-header" style="gap:8px; align-items:center">
                  <h3 style="margin-right:auto">Empresa</h3>
                  <div class="tabline" id="companyTabs" style="display:flex; gap:6px">
                    <button class="btn btn-secondary btn-sm company-tab active" data-company-tab="overview">Vis√£o Geral</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="users">Membros</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="reservations">Reservas</button>
                    <button class="btn btn-secondary btn-sm company-tab" data-company-tab="finance">Financeiro</button>
                  </div>
                </div>

                <div id="companyTab-overview" class="company-panel">
                  <div class="grid-cards-3" id="companyOverview">
                    <div class="stat-card"><strong>Reservas ativas</strong><span id="coActive">‚Äî</span></div>
                    <div class="stat-card"><strong>Pr√≥ximos 7 dias</strong><span id="coNext">‚Äî</span></div>
                    <div class="stat-card"><strong>Pagamentos pendentes</strong><span id="coPay">‚Äî</span></div>
                  </div>
                </div>

                <div id="companyTab-users" class="company-panel" hidden>
                  <div class="inline-actions" style="margin-bottom:10px; display:flex; gap:8px; flex-wrap:wrap">
                    <input type="text" id="companyInviteCpf" placeholder="CPF do membro (somente n√∫meros)" maxlength="14" style="min-width:220px">
                    <select id="companyInviteRole">
                      <option value="membro">Membro</option>
                      <option value="gestor">Gestor</option>
                      <option value="leitor">Leitor</option>
                      <option value="admin">Admin</option>
                    </select>
                    <button class="btn btn-secondary" type="button" id="companyInviteBtn">Convidar por CPF</button>
                  </div>
                  <div id="companyUsersContainer" class="responsive-table"></div>
                </div>

                <div id="companyTab-reservations" class="company-panel" hidden>
                  <div id="companyReservationsContainer" class="responsive-table"></div>
                </div>

                <div id="companyTab-finance" class="company-panel" hidden>
                  <div id="companyFinanceContainer" class="responsive-table"></div>
                </div>
              </article>
            </section>
          </div>

          <div id="panel-profile" class="portal-section" hidden>
            <article class="form-card profile-card">
              <h3>Dados do Cliente</h3>
              <form id="profileForm" class="profile-form">
                <div class="form-grid-mini">
                  <div>
                    <label for="profileNameInput">Nome completo</label>
                    <input type="text" id="profileNameInput" name="name" required readonly />
                  </div>
                  <div>
                    <label for="profileLoginInput">Login</label>
                    <input type="text" id="profileLoginInput" name="login" required readonly />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileEmailInput">E-mail</label>
                    <input type="email" id="profileEmailInput" name="email" readonly data-immutable="true" />
                  </div>
                  <div>
                    <label for="profileCpfInput">CPF</label>
                    <input type="text" id="profileCpfInput" name="cpf" readonly data-immutable="true" />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profilePhoneInput">Telefone</label>
                    <input type="text" id="profilePhoneInput" name="phone" maxlength="15" readonly />
                  </div>
                  <div>
                    <label for="profileWhatsappInput">WhatsApp</label>
                    <input type="text" id="profileWhatsappInput" name="whatsapp" maxlength="15" readonly />
                  </div>
                </div>
                <div class="form-row">
                  <label for="profileCompanyInput">Empresa</label>
                  <input type="text" id="profileCompanyInput" class="input-readonly" readonly data-immutable="true" />
                </div>
                <p class="form-help">E-mail e CPF s√£o definidos no cadastro inicial e n√£o podem ser alterados pelo portal.</p>
                <div class="form-row profile-actions">
                  <button type="button" class="btn btn-secondary" id="editProfileBtn">Editar dados</button>
                  <button type="submit" class="btn btn-primary" id="saveProfileBtn" hidden>Salvar altera√ß√µes</button>
                  <button type="button" class="btn btn-secondary" id="cancelProfileEditBtn" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="profileMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-payments" class="portal-section" hidden>
            <article class="form-card payments-card">
              <div class="icon-placeholder">üí≥</div>
              <h3>Formas de Pagamento</h3>
              <p class="rooms-message">P√°gina em constru√ß√£o. Em breve voc√™ poder√° cadastrar cart√µes de cr√©dito e outros m√©todos de pagamento neste portal.</p>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Contato: contato@zeefe.com | (11) 1234-5678</p>
    <p>Endere√ßo: Moema, S√£o Paulo - SP</p>
    <p><a href="#">Instagram</a> | <a href="#">LinkedIn</a></p>
    <p>¬© 2025 Ze.EFE - Todos os direitos reservados</p>
  </footer>

  <!-- Modal de a√ß√µes da reserva -->
  <div class="modal-overlay" id="reservationActionsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="reservationActionsTitle">
      <button class="modal-close" type="button" id="reservationActionsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="reservationActionsTitle" style="margin-top:0">A√ß√µes da reserva</h2>
          <p id="reservationActionsMeta" class="rooms-message"></p>
          <div id="reservationActionsButtons" class="actions-grid"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de edi√ß√£o de perfil -->
  <div class="modal-overlay" id="profileEditModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="profileEditTitle">
      <button class="modal-close" type="button" id="profileEditClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="profileEditTitle" style="margin-top:0">Editar perfil</h2>
          <form id="profileEditForm" class="profile-edit-form">
            <div class="form-grid-mini">
              <div>
                <label for="editName">Nome completo</label>
                <input type="text" id="editName" name="name" required />
              </div>
              <div>
                <label for="editLogin">Login</label>
                <input type="text" id="editLogin" name="login" required />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editEmail">E-mail</label>
                <input type="email" id="editEmail" name="email" readonly />
              </div>
              <div>
                <label for="editCpf">CPF</label>
                <input type="text" id="editCpf" name="cpf" readonly />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editPhone">Telefone</label>
                <input type="text" id="editPhone" name="phone" maxlength="15" />
              </div>
              <div>
                <label for="editWhatsapp">WhatsApp</label>
                <input type="text" id="editWhatsapp" name="whatsapp" maxlength="15" />
              </div>
            </div>

            <fieldset class="password-change">
              <legend>Alterar senha</legend>
              <div class="form-grid-mini">
                <div>
                  <label for="currentPassword">Senha atual</label>
                  <input type="password" id="currentPassword" autocomplete="current-password" />
                </div>
                <div>
                  <label for="newPassword">Nova senha</label>
                  <input type="password" id="newPassword" autocomplete="new-password" />
                </div>
              </div>
              <div class="form-grid-mini">
                <div>
                  <label for="newPasswordConfirm">Confirmar nova senha</label>
                  <input type="password" id="newPasswordConfirm" autocomplete="new-password" />
                </div>
                <div class="password-indicators inline">
                  <span class="password-indicator state-neutral" id="pwdStrengthIndicator">For√ßa da senha: aguardando</span>
                  <span class="password-indicator state-neutral" id="pwdMatchIndicator">Confirma√ß√£o: aguardando</span>
                </div>
              </div>
              <p class="password-hint">A senha deve ter 8+ caracteres com letras, n√∫meros e s√≠mbolos.</p>
            </fieldset>

            <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
              <button type="button" class="btn btn-secondary" id="profileEditCancel">Cancelar</button>
              <button type="submit" class="btn btn-primary">Salvar</button>
            </div>
            <div class="form-row"><div id="profileEditMessage" class="rooms-message"></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/clientes.js" defer></script>
</body>
</html>
