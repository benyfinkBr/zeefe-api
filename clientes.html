<!DOCTYPE html>
<html lang="pt-BR">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17483604386"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17483604386');
</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ze.EFE - Marca l√°!</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Leaflet (mapa) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
</head>
<body class="client-portal-page auth-loading">
  <header class="site-header">
    <div class="site-header-inner">
      <div class="site-header-left">
        <a href="index.html" class="site-logo">
          <img src="img/logo.jpg" alt="Ze.EFE" />
        </a>
        <nav class="site-nav">
          <a href="salas.html">Salas</a>
          <a href="workshops.html">Cursos</a>
          <a href="conteudos.html">Conte√∫dos</a>
          <a href="quemsomos.html">Quem somos</a>
        </nav>
      </div>
      <div class="site-header-actions">
        <a href="index.html#contato" class="site-link">Contato</a>
        <div class="site-header-guest" data-zeefe-header="guest">
          <button class="btn btn-outline" type="button" onclick="window.location='clientes.html'">Entrar</button>
        </div>
        <div class="site-header-user" id="clientHeaderAccount" data-zeefe-header="account" hidden>
          <button class="user-menu-trigger" type="button" id="clientHeaderAccountBtn" data-zeefe-header-btn="account" aria-haspopup="true" aria-expanded="false">
            <span data-zeefe-header-label="account">Minha Conta</span>
          </button>
          <div class="user-menu-dropdown" id="clientHeaderAccountMenu" role="menu">
            <p class="user-menu-label" data-zeefe-header-label="user"></p>
            <div class="user-menu-section" id="clientHeaderLoginType">
              <p class="user-menu-label">Tipo de login</p>
              <div class="user-menu-pills">
                <button type="button" class="user-menu-pill active" id="clientHeaderScopePF" data-scope="pf">Pessoa F√≠sica</button>
                <button type="button" class="user-menu-pill" id="clientHeaderScopeCompany" data-scope="company" hidden>Empresa</button>
              </div>
            </div>
            <button type="button" class="user-menu-item" id="clientHeaderReservations" data-zeefe-header-client="reservations">Minhas Reservas</button>
            <button type="button" class="user-menu-item" id="clientHeaderProfile" data-zeefe-header-client="profile">Meu Perfil</button>
            <button type="button" class="user-menu-item" id="clientHeaderMessages" data-zeefe-header-client="messages">Mensagens</button>
            <button type="button" class="user-menu-item user-menu-danger" id="clientHeaderLogout" data-zeefe-header-btn="logout">Sair</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="client-portal">
    <section id="authContainer" class="auth-container">
      <div id="authLogin" class="auth-screen">
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Portal do Cliente<br><span>Ze.EFE</span></h2>
          <div class="scope-pill" style="display:flex; gap:8px; justify-content:center; margin:8px 0 12px;">
            <button type="button" id="authScopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
            <button type="button" id="authScopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company">Empresa</button>
          </div>
          <form id="portalLoginForm" autocomplete="on">
            <input type="text" id="portalLoginIdentifier" name="identifier" placeholder="Login, e-mail ou CPF" required autocomplete="username" />
            <input type="password" id="portalLoginPassword" name="password" placeholder="Senha" required autocomplete="current-password" />
            <div class="remember-line">
              <label class="remember">
                <input type="checkbox" id="portalRememberMe" />
                <span>Lembrar login neste computador</span>
              </label>
            </div>
            <button class="btn btn-primary" type="submit">Entrar</button>
          </form>
          <div class="auth-quick-actions" id="authActions">
            <button type="button" class="ghost-btn" data-view="recovery">Esqueci minha senha</button>
            <button type="button" class="ghost-btn" data-view="register">Quero me cadastrar</button>
          </div>
        </div>
      </div>

      <div id="authRegister" class="auth-screen" hidden>
        <div class="login-card register-card">
          <div class="register-hero">
            <img src="img/logo.jpg" alt="Ze.EFE">
            <h2>Criar acesso<br><span>Portal do Cliente</span></h2>
          </div>
          <form id="portalRegisterForm" class="auth-form auth-form-grid" autocomplete="on">
            <div class="form-field">
              <label for="registerName">Nome completo</label>
              <input type="text" id="registerName" name="name" required />
            </div>
            <div class="form-field">
              <label for="registerEmail">E-mail</label>
              <input type="email" id="registerEmail" name="email" required autocomplete="email" />
              <small class="input-hint">Use este e-mail ou CPF para acessar o portal.</small>
            </div>
            <div class="form-field">
              <label for="registerCpf">CPF</label>
              <input type="text" id="registerCpf" name="cpf" maxlength="14" required autocomplete="off" />
              <small class="input-hint" id="cpfHint">Informe os 11 d√≠gitos do CPF.</small>
            </div>
            <div class="form-field">
              <label for="registerPhone">Telefone (opcional)</label>
              <input type="text" id="registerPhone" name="phone" maxlength="15" autocomplete="tel" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPassword">Senha</label>
              <input type="password" id="registerPassword" name="password" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-duo">
              <label for="registerPasswordConfirm">Confirmar senha</label>
              <input type="password" id="registerPasswordConfirm" name="password_confirm" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-full password-indicators" id="passwordIndicators">
              <span class="password-indicator state-neutral" data-password-strength>For√ßa da senha: aguardando</span>
              <span class="password-indicator state-neutral" data-password-match>Confirma√ß√£o: aguardando</span>
            </div>
            <div class="form-field form-field-full">
              <p class="password-hint" id="passwordHint">
                A senha deve conter no m√≠nimo 8 caracteres, incluindo letras, n√∫meros e s√≠mbolos.
              </p>
            </div>
            <div class="form-field form-field-full">
              <button class="btn btn-primary" type="submit">Concluir cadastro</button>
            </div>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authRecovery" class="auth-screen" hidden>
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Recuperar acesso<br><span>Portal do Cliente</span></h2>
          <form id="portalRecoveryForm" class="auth-form" autocomplete="on">
            <div class="form-field">
              <label for="recoveryLogin">Login ou e-mail cadastrado</label>
              <input type="text" id="recoveryLogin" name="login" required autocomplete="username" />
            </div>
            <p class="rooms-message">Enviaremos uma senha tempor√°ria para o e-mail registrado.</p>
            <button class="btn btn-primary" type="submit">Enviar nova senha</button>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authMessage" class="rooms-message auth-message"></div>
    </section>

    <section id="clientPanels" class="portal-shell" hidden>
      <aside class="portal-nav">
        <div class="portal-nav-brand">
          <img src="img/logo.jpg" alt="Ze.EFE" />
          <h2>Gest√£o do Cliente</h2>
        </div>
        <nav class="portal-nav-links">
          <button type="button" data-panel="book" class="active">Reservar</button>
          <button type="button" data-panel="reservations">Minhas Reservas</button>
          <button type="button" data-panel="visitors">Visitantes</button>
          <button type="button" data-panel="company" id="companyTab" hidden>Empresa</button>
          <button type="button" data-panel="courses">Cursos</button>
          <button type="button" data-panel="faq">FAQ</button>
          <button type="button" data-panel="profile">Meu Perfil</button>
        </nav>
        <button type="button" class="referral-slot referral-slot-side" id="referralSlotSide" hidden>
          <span class="referral-kicker">Indique e Ganhe</span>
          <span class="referral-text">Quando voc√™ indica uma empresa para a Ze.EFE, voc√™s dois ganham.</span>
          <span class="referral-pill">Indicar agora</span>
        </button>
        <button type="button" id="logoutBtn" class="nav-logout">Sair</button>
      </aside>

      <div class="portal-main">
        <header class="portal-header">
          <div>
            <h2>Ol√°, <span id="clientName"></span></h2>
            <div id="clientCompany" class="portal-subtitle"></div>
          </div>
          <div class="portal-scope-switch">
            <div class="scope-pill">
              <button type="button" id="scopePFBtn" class="btn btn-secondary btn-sm active" data-scope="pf">Pessoa F√≠sica</button>
              <button type="button" id="scopeCompanyBtn" class="btn btn-secondary btn-sm" data-scope="company" hidden>Empresa</button>
            </div>
          </div>
          <div class="portal-actions">
            <button class="referral-slot referral-slot-top" type="button" id="referralSlotTop" hidden>Indique e Ganhe</button>
            <button class="btn btn-secondary btn-with-badge" type="button" id="openSupportChatBtn">
              <span>Mensagens</span>
              <span id="clientMessagesBadge" class="badge-dot" hidden></span>
            </button>
            <button class="btn btn-secondary" type="button" id="refreshBtn">Atualizar</button>
          </div>
        </header>

        <div class="portal-content">
          <div id="panel-book" class="portal-section">
            <article class="form-card booking-card">
              <h3 id="bookingFormTitle">Reservar uma sala</h3>
              <form id="reservationBookForm">
                <input type="hidden" name="id" />
                <input type="hidden" name="room_id" id="bookingRoomId" />
                <input type="hidden" name="time_start" value="08:00" />
                <input type="hidden" name="time_end" value="20:00" />

                <div class="booking-mode-choice">
                  <span class="booking-mode-label">Como voc√™ prefere buscar?</span>
                  <div class="booking-mode-buttons">
                    <button type="button" class="mode-btn active" id="bookingModeDate" data-mode="date">Buscar por Data</button>
                    <button type="button" class="mode-btn" id="bookingModeRoom" data-mode="room">Buscar por Local</button>
                  </div>
                </div>

                <div class="booking-stepper">
                  <div class="booking-stepper-item active" data-step-index="0">
                    <span>1</span>
                    <strong>Data</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="1">
                    <span>2</span>
                    <strong>Salas</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="2">
                    <span>3</span>
                    <strong>Detalhes</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="3">
                    <span>4</span>
                    <strong>Visitantes</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="4">
                    <span>5</span>
                    <strong>Resumo</strong>
                  </div>
                </div>

                <p class="form-help booking-mode-hint" id="bookingModeHint">
                  Datas primeiro: selecione um ou mais dias no calend√°rio e depois escolha a sala.
                </p>

                <section class="booking-step" data-step-index="0">
                  <div class="booking-calendar">
                    <header class="calendar-header">
                      <button type="button" id="bookingPrevMonth" aria-label="M√™s anterior">&#10094;</button>
                      <div id="bookingCalendarLabel"></div>
                      <button type="button" id="bookingNextMonth" aria-label="Pr√≥ximo m√™s">&#10095;</button>
                    </header>
                    <div class="booking-date-mode">
                      <span class="booking-date-mode-label">Per√≠odo</span>
                      <div class="booking-date-mode-buttons">
                        <button type="button" class="mode-btn mode-btn-small active" id="dateModeSingle">Apenas um dia</button>
                        <button type="button" class="mode-btn mode-btn-small" id="dateModeMulti">V√°rios dias</button>
                      </div>
                    </div>
                    <div class="calendar-grid" id="bookingCalendarGrid" role="grid" aria-labelledby="bookingCalendarLabel"></div>
                    <input type="hidden" id="bookingDateInput" name="date" required />
                  </div>
                  <p class="form-help fixed-schedule-note">Selecione um dia dispon√≠vel. Reservas s√£o di√°rias entre 08:00 e 20:00.</p>
                  <p class="form-help" id="multiDateSummary" hidden>Voc√™ selecionou 0 dias.</p>

                  <div id="roomPickerInline" class="booking-room-inline" hidden>
                    <h4>Escolha a sala</h4>
                    <p class="form-help">Comece escolhendo a sala. O calend√°rio mostra as datas livres dessa sala.</p>
                    <div id="bookingRoomOptionsInline" class="booking-room-options"></div>
                    <div id="bookingRoomFeedbackInline" class="rooms-message"></div>
                  </div>
                </section>

                <section class="booking-step" data-step-index="1" hidden>
                  <div id="bookingRoomsMap" class="rooms-map booking-rooms-map" role="region" aria-label="Mapa de salas dispon√≠veis"></div>
                  <section class="rooms-filters booking-room-filters" aria-label="Filtros de salas">
                    <div class="filters-wrap">
                      <input id="bookingRoomSearch" type="text" placeholder="Buscar por nome ou local" aria-label="Buscar por nome ou local" />
                      <select id="bookingStateFilter" aria-label="Estado (UF)">
                        <option value="">UF (todas)</option>
                      </select>
                      <select id="bookingCityFilter" aria-label="Cidade">
                        <option value="">Cidade (todas)</option>
                      </select>
                      <select id="bookingCapacityFilter" aria-label="Capacidade">
                        <option value="">Capacidade (todas)</option>
                        <option value="10">At√© 10</option>
                        <option value="20">At√© 20</option>
                        <option value="50">At√© 50</option>
                        <option value="51">Mais de 50</option>
                      </select>
                      <label class="input-label" for="bookingRoomSort">Ordenar por</label>
                      <select id="bookingRoomSort" aria-label="Ordenar por">
                        <option value="name">Nome</option>
                        <option value="price">Pre√ßo</option>
                        <option value="distance">Dist√¢ncia</option>
                      </select>
                      <button id="bookingOpenAdvancedFilters" class="btn btn-secondary btn-sm" type="button">Filtros avan√ßados</button>
                      <button id="bookingClearFilters" class="btn btn-secondary btn-sm" type="button">Limpar filtros</button>
                    </div>
                  </section>
                  <div class="booking-room-view-row">
                    <span class="input-label">Visualiza√ß√£o</span>
                    <div class="booking-room-view">
                      <button type="button" class="btn btn-secondary btn-sm active" id="bookingRoomViewGrid">Grid</button>
                      <button type="button" class="btn btn-secondary btn-sm" id="bookingRoomViewList">Lista</button>
                    </div>
                  </div>
                  <div id="bookingRoomOptions" class="booking-room-options"></div>
                  <div id="bookingRoomFeedback" class="rooms-message"></div>
                </section>

                <section class="booking-step" data-step-index="2" hidden>
                  <div class="form-row">
                    <label for="bookingTitleInput">T√≠tulo</label>
                    <input type="text" id="bookingTitleInput" name="title" maxlength="120" required />
                  </div>
                  <div class="form-row" id="companyBookingRow" hidden>
                    <label class="form-label" style="display:flex; align-items:center; gap:10px">
                      <input type="checkbox" id="bookingCompanyToggle" />
                      Reserva pela empresa
                    </label>
                  </div>
                  <div class="form-row">
                    <label for="bookingDescriptionInput">Descri√ß√£o / Observa√ß√µes</label>
                    <textarea id="bookingDescriptionInput" name="description" rows="3"></textarea>
                  </div>
                  <div class="form-row" id="bookingPolicyRow" hidden>
                    <label>Op√ß√£o de pagamento/cancelamento</label>
                    <div id="bookingPolicyOptions" class="policy-select"></div>
                    <small id="bookingPolicyHint" class="input-hint"></small>
                    <input type="hidden" id="bookingPolicyId" name="policy_id" />
                    <input type="hidden" id="bookingPolicyKey" name="policy_key" />
                    <input type="hidden" id="bookingPolicyLabel" name="policy_label" />
                    <input type="hidden" id="bookingPolicyCancelDays" name="policy_cancel_days" />
                    <input type="hidden" id="bookingPolicyCancelFee" name="policy_cancel_fee_pct" />
                    <input type="hidden" id="bookingPolicyChargeTiming" name="policy_charge_timing" />
                  </div>
                  <div class="form-row">
                    <label for="bookingVoucherCode">Voucher (opcional)</label>
                    <div style="display:flex; gap:8px; align-items:center; width:100%">
                      <input type="text" id="bookingVoucherCode" placeholder="C√≥digo do voucher" style="flex:1" />
                      <button type="button" class="btn btn-secondary btn-sm" id="bookingVoucherApply">Aplicar</button>
                    </div>
                    <small id="bookingVoucherResult" class="input-hint"></small>
                  </div>
                </section>

                <section class="booking-step" data-step-index="3" hidden>
                  <div class="form-row">
                    <label class="form-label">Visitantes</label>
                    <div class="visitor-multiselect" id="bookingVisitorSelector"></div>
                  </div>
                  <div class="form-row visitor-actions">
                    <label>
                      <input type="checkbox" name="send_invites" checked>
                      Enviar convite por e-mail aos visitantes selecionados
                    </label>
                    <button type="button" class="btn btn-secondary btn-sm" id="openVisitorsPanel">Gerenciar visitantes</button>
                  </div>
                </section>

                <section class="booking-step" data-step-index="4" hidden>
                  <h4>Resumo da reserva</h4>
                  <p class="form-help">Confira os dados antes de confirmar a solicita√ß√£o.</p>
                  <div id="bookingSummary" class="booking-summary"></div>
                  <div class="form-row" style="margin-top:12px">
                    <label for="bookingCardSelect">Cart√£o para pagamento</label>
                    <div class="card-select-row">
                      <select id="bookingCardSelect"></select>
                      <button type="button" class="btn btn-secondary btn-sm" id="bookingCardManage" data-open-card-modal>Gerenciar cart√µes</button>
                    </div>
                    <small id="bookingCardHint" class="input-hint"></small>
                    <input type="hidden" id="bookingCardInput" name="stripe_payment_method_id" />
                  </div>
                </section>

                <div class="booking-navigation">
                  <button type="button" class="btn btn-secondary" id="bookingPrevBtn" hidden>Voltar</button>
                  <button type="button" class="btn btn-primary" id="bookingNextBtn">Avan√ßar</button>
                  <button class="btn btn-primary" type="submit" id="bookingSubmitBtn" hidden>Solicitar reserva</button>
                  <button class="btn btn-secondary" type="button" id="cancelReservationEdit" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="bookingMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-reservations" class="portal-section" hidden>
            <section class="client-lists">
              <article>
                <div class="list-header">
                  <h3>Minhas Reservas</h3>
                  <button class="btn btn-secondary" type="button" id="newReservationBtn">Nova reserva</button>
                </div>
                <div class="reservations-calendar-card">
                  <div class="calendar-header">
                    <button type="button" class="btn btn-secondary btn-sm" id="reservationsCalPrev" aria-label="M√™s anterior">‚óÄ</button>
                    <div class="calendar-label" id="reservationsCalLabel"></div>
                    <button type="button" class="btn btn-secondary btn-sm" id="reservationsCalNext" aria-label="Pr√≥ximo m√™s">‚ñ∂</button>
                  </div>
                  <div class="calendar-grid" id="reservationsCalGrid"></div>
                </div>
                <div class="reservations-day-list" id="reservationsDayList">
                  <div class="day-list-header">
                    <div class="day-list-title" id="reservationsDayTitle">Selecione um dia no calend√°rio</div>
                    <button type="button" class="btn btn-secondary btn-sm" id="reservationsDayClear" hidden>Limpar filtro</button>
                  </div>
                  <div class="day-list-items" id="reservationsDayItems"></div>
                </div>
                <div id="reservationsContainer" class="responsive-table"></div>
              </article>
            </section>
          </div>

          <div id="panel-visitors" class="portal-section" hidden>
            <section class="client-lists visitors-layout">
              <article class="visitor-list-card">
                <div class="list-header">
                  <h3>Visitantes</h3>
                  <button class="btn btn-secondary" type="button" id="newVisitorBtn">Novo</button>
                </div>
                <div id="visitorsContainer" class="responsive-table"></div>
              </article>

              <article class="form-card visitor-form-card is-collapsed" id="visitorFormWrapper" hidden>
                <h3 id="visitorFormTitle">Novo Visitante</h3>
                <form id="visitorForm">
                  <input type="hidden" name="id" />
                  <div class="form-row">
                    <label>Nome completo</label>
                    <input type="text" name="name" required />
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>CPF</label>
                      <input type="text" name="cpf" maxlength="14" />
                    </div>
                    <div>
                      <label>RG</label>
                      <input type="text" name="rg" />
                    </div>
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>E-mail</label>
                      <input type="email" name="email" />
                    </div>
                    <div>
                      <label>Telefone</label>
                      <input type="text" name="phone" maxlength="15" />
                    </div>
                    <div>
                      <label>WhatsApp</label>
                      <input type="text" name="whatsapp" maxlength="15" />
                    </div>
                  </div>
                  <div class="form-row">
                    <label>Status</label>
                    <select name="status">
                      <option value="ativo">Ativo</option>
                      <option value="inativo">Inativo</option>
                    </select>
                  </div>
                  <div class="form-row">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <button class="btn btn-secondary" type="button" id="cancelVisitorEdit" hidden>Cancelar</button>
                  </div>
                </form>
              </article>
            </section>
          </div>

          <div id="panel-company" class="portal-section" hidden>
            <div class="company-pending-card" id="companyPendingBlock" hidden>
              <h4>Convite pendente</h4>
              <p class="rooms-message">Voc√™ recebeu um convite para participar de uma empresa na Ze.EFE. Aceite para liberar os recursos empresariais.</p>
              <div id="companyPendingList" class="inbox-list"></div>
              <div id="companyPendingMessage" class="rooms-message"></div>
            </div>

            <div id="companyContent">
              <section class="client-lists">
                <article class="form-card">
                  <div class="list-header" style="gap:8px; align-items:center">
                    <h3 style="margin-right:auto">Empresa</h3>
                    <div class="tabline" id="companyTabs" style="display:flex; gap:6px">
                      <button class="btn btn-secondary btn-sm company-tab active" data-company-tab="overview">Vis√£o Geral</button>
                      <button class="btn btn-secondary btn-sm company-tab" data-company-tab="users">Membros</button>
                      <button class="btn btn-secondary btn-sm company-tab" data-company-tab="reservations">Reservas</button>
                      <button class="btn btn-secondary btn-sm company-tab" data-company-tab="finance">Financeiro</button>
                    </div>
                  </div>

                  <div id="companyTab-overview" class="company-panel">
                    <div class="grid-cards-3 stats-cards" id="companyOverview">
                      <div class="stat-card">
                        <div class="stat-icon" aria-hidden="true">üìå</div>
                        <div class="stat-text">
                          <span class="stat-label">Reservas ativas</span>
                          <span class="stat-value" id="coActive">‚Äî</span>
                        </div>
                      </div>
                      <div class="stat-card">
                        <div class="stat-icon" aria-hidden="true">üìÖ</div>
                        <div class="stat-text">
                          <span class="stat-label">Pr√≥ximos 7 dias</span>
                          <span class="stat-value" id="coNext">‚Äî</span>
                        </div>
                      </div>
                      <div class="stat-card">
                        <div class="stat-icon" aria-hidden="true">üí≥</div>
                        <div class="stat-text">
                          <span class="stat-label">Pagamentos pendentes</span>
                          <span class="stat-value" id="coPay">‚Äî</span>
                        </div>
                      </div>
                    </div>
                    <div class="overview-split">
                      <div class="overview-box">
                        <h4>Pr√≥ximas reservas</h4>
                        <div id="companyOverviewNext" class="list-next"></div>
                      </div>
                      <div class="overview-box">
                        <h4>A√ß√µes r√°pidas</h4>
                        <div class="quick-actions">
                          <button class="btn btn-secondary btn-sm" type="button" data-panel="reservations">Ver reservas</button>
                          <button class="btn btn-secondary btn-sm" type="button" data-panel="users">Convidar membro</button>
                          <button class="btn btn-secondary btn-sm" type="button" data-panel="finance">Financeiro</button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div id="companyTab-users" class="company-panel" hidden>
                    <div class="member-actions" id="companyMembersActions">
                      <div class="company-action-cards">
                        <button type="button" class="action-card" id="openInviteModal">
                          <span class="icon">üîç</span>
                          <span class="label">Convidar membro</span>
                        </button>
                        <button type="button" class="action-card" id="openManualModal">
                          <span class="icon">‚úçÔ∏è</span>
                          <span class="label">Adicionar manualmente</span>
                        </button>
                        <button type="button" class="action-card" id="openImportModal">
                          <span class="icon">üì•</span>
                          <span class="label">Importar contatos</span>
                        </button>
                        <button type="button" class="action-card" id="openManageInvites">
                          <span class="icon">üóÇÔ∏è</span>
                          <span class="label">Gerenciar convites</span>
                        </button>
                      </div>
                      <input type="file" id="companyXlsxInput" accept=".xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" hidden>
                    </div>

                    <section class="card-block">
                      <h4>Membros</h4>
                      <div id="companyUsersContainer" class="responsive-table"></div>
                    </section>

                    <section class="card-block" id="companyInvitesBlock" hidden>
                      <div class="list-header" style="gap:8px; align-items:center">
                        <h4 style="margin-right:auto">Convites</h4>
                        <button class="btn btn-secondary btn-sm" type="button" id="companyInvitesClose">Fechar</button>
                      </div>
                      <div id="companyInvitesContainer" class="responsive-table"></div>
                    </section>
                  </div>

                  <div id="companyTab-reservations" class="company-panel" hidden>
                    <div id="companyReservationsContainer" class="responsive-table"></div>
                  </div>

                  <div id="companyTab-finance" class="company-panel" hidden>
                    <div class="finance-filters">
                      <div class="preset-row">
                        <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="30">√öltimos 30 dias</button>
                        <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="60">60 dias</button>
                        <button type="button" class="btn btn-secondary btn-sm finance-preset" data-range="90">90 dias</button>
                        <span class="chip">ou</span>
                        <label>De <input type="date" id="finFrom"></label>
                        <label>At√© <input type="date" id="finTo"></label>
                        <button type="button" class="btn btn-secondary btn-sm" id="finApply">Aplicar</button>
                      </div>
                      <small class="form-help">Per√≠odo personalizado com limite m√°ximo de 6 meses.</small>
                    </div>
                    <div id="companyFinanceContainer" class="responsive-table"></div>
                  </div>
                </article>
              </section>
            </div>
          </div>

          <!-- Modal de pr√©-visualiza√ß√£o do XLSX -->
          <div class="modal-overlay" id="xlsxPreviewModal" aria-hidden="true">
            <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="xlsxPreviewTitle">
              <button class="modal-close" type="button" id="xlsxPreviewClose" aria-label="Fechar">&times;</button>
              <div class="modal-body">
                <div class="modal-info" style="padding:24px; width:100%">
                  <h2 id="xlsxPreviewTitle" style="margin-top:0">Pr√©‚Äëvisualiza√ß√£o da importa√ß√£o</h2>
                  <p class="rooms-message">Revise as linhas detectadas. Linhas inv√°lidas aparecem destacadas e n√£o ser√£o importadas.</p>
                  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                    <div class="rooms-message" style="margin:0;">Voc√™ pode editar os campos antes de importar.</div>
                    <div style="display:flex; gap:8px;">
                      <button type="button" class="btn btn-secondary btn-sm" id="xlsxPreviewAdd">Adicionar linha</button>
                    </div>
                  </div>
                  <div id="xlsxPreviewTable" class="responsive-table"></div>
                  <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
                    <button type="button" class="btn btn-secondary" id="xlsxPreviewCancel">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="xlsxPreviewConfirm">Importar selecionados</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="panel-profile" class="portal-section" hidden>
            <article class="form-card profile-card">
              <h3>Dados do Cliente</h3>
              <form id="profileForm" class="profile-form">
                <div class="form-grid-mini">
                  <div>
                    <label for="profileNameInput">Nome completo</label>
                    <input type="text" id="profileNameInput" name="name" required readonly />
                  </div>
                  <div>
                    <label for="profileLoginInput">Login</label>
                    <input type="text" id="profileLoginInput" name="login" required readonly />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileEmailInput">E-mail</label>
                    <input type="email" id="profileEmailInput" name="email" readonly data-immutable="true" />
                  </div>
                  <div>
                    <label for="profileCpfInput">CPF</label>
                    <input type="text" id="profileCpfInput" name="cpf" readonly data-immutable="true" />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profilePhoneInput">Telefone</label>
                    <input type="text" id="profilePhoneInput" name="phone" maxlength="15" readonly />
                  </div>
                  <div>
                    <label for="profileWhatsappInput">WhatsApp</label>
                    <input type="text" id="profileWhatsappInput" name="whatsapp" maxlength="15" readonly />
                  </div>
                </div>
                <div class="form-row" id="profileCompanyRow">
                  <label for="profileCompanyInput">Empresa</label>
                  <input type="text" id="profileCompanyInput" class="input-readonly" readonly data-immutable="true" />
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileZipInput">CEP</label>
                    <input type="text" id="profileZipInput" name="zip_code" maxlength="20" readonly />
                  </div>
                  <div>
                    <label for="profileStateInput">Estado</label>
                    <input type="text" id="profileStateInput" name="state" maxlength="10" readonly />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileCityInput">Cidade</label>
                    <input type="text" id="profileCityInput" name="city" readonly />
                  </div>
                  <div>
                    <label for="profileCountryInput">Pa√≠s</label>
                    <input type="text" id="profileCountryInput" name="country" readonly value="BR" />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileStreetInput">Endere√ßo</label>
                    <input type="text" id="profileStreetInput" name="street" readonly />
                  </div>
                  <div>
                    <label for="profileNumberInput">N√∫mero</label>
                    <input type="text" id="profileNumberInput" name="number" readonly />
                  </div>
                </div>
                <div class="form-row">
                  <label for="profileComplementInput">Complemento</label>
                  <input type="text" id="profileComplementInput" name="complement" readonly />
                </div>
                <p class="form-help">E-mail e CPF s√£o definidos no cadastro inicial e n√£o podem ser alterados pelo portal.</p>
                <div class="form-row profile-actions">
                  <button type="button" class="btn btn-secondary" id="editProfileBtn">Editar Perfil</button>
                  <button type="button" class="btn btn-secondary" id="cancelProfileEditBtn">Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="profileMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
            <article class="form-card profile-card" style="margin-top:16px">
              <h3>Op√ß√µes de pagamento</h3>
              <p class="form-help">Gerencie os cart√µes usados nas reservas.</p>
              <div class="form-row" style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-start;">
                <button type="button" class="btn btn-secondary btn-sm" data-open-card-modal>Adicionar cart√£o</button>
                <button type="button" class="btn btn-secondary btn-sm" data-open-card-modal>Gerenciar cart√µes</button>
              </div>
              <div id="profileCardsMessage" class="rooms-message"></div>
              <ul id="profileCardsList" class="card-list"></ul>
            </article>
          </div>

          <div id="panel-courses" class="portal-section" hidden>
            <article class="form-card">
              <h3>Meus cursos</h3>
              <p class="form-help">Pagamentos s√£o confirmados somente quando o curso atinge o m√≠nimo de participantes definido pelo anunciante.</p>
              <div id="clientCoursesMessage" class="rooms-message"></div>
              <div id="clientCoursesList" class="workshops-grid courses-grid"></div>
            </article>
            <article class="form-card">
              <h3>Cursos dispon√≠veis</h3>
              <p class="form-help">Escolha um curso para se inscrever. Voc√™ receber√° a confirma√ß√£o assim que o pagamento for processado.</p>
              <div id="coursesFeedback" class="rooms-message"></div>
              <div id="availableCoursesMessage" class="rooms-message"></div>
              <div id="availableCoursesGrid" class="workshops-grid courses-grid"></div>
            </article>
          </div>

          <div id="panel-faq" class="portal-section" hidden>
            <article class="form-card">
              <h3>FAQ do Cliente</h3>
              <p class="form-help">Tire suas d√∫vidas com um passo a passo simples.</p>
              <iframe class="faq-embed" title="FAQ do Cliente" src="faq.html?perfil=cliente"></iframe>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Contato: contato@zeefe.com | <a href="https://wa.me/11922293332?text=Ol√°,%20gostaria%20de%20mais%20informa√ß√µes.">(11) 9.2229-3332</a></p>
    <p>Endere√ßo: Moema, S√£o Paulo - SP</p>
    <p><a href="https://www.instagram.com/zeefe_brasil/">Instagram</a> | <a href="https://www.linkedin.com/company/zeefe/about/?viewAsMember=true">LinkedIn</a></p>
    <p>¬© 2025 Ze.EFE - Todos os direitos reservados</p>
  </footer>

  <!-- Modal de a√ß√µes da reserva -->
  <div class="modal-overlay" id="reservationActionsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="reservationActionsTitle">
      <button class="modal-close" type="button" id="reservationActionsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="reservationActionsTitle" style="margin-top:0">A√ß√µes da reserva</h2>
          <p id="reservationActionsMeta" class="rooms-message"></p>
          <div id="reservationActionsButtons" class="actions-grid"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Confirmar cancelamento de reserva -->
  <div class="modal-overlay" id="reservationCancelModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="reservationCancelTitle">
      <button class="modal-close" type="button" id="reservationCancelClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="reservationCancelTitle" style="margin-top:0">Cancelar reserva</h2>
          <p id="reservationCancelText" class="rooms-message">Tem certeza de que deseja cancelar esta reserva? Essa a√ß√£o ficar√° registrada no seu perfil e cancelamentos recorrentes podem resultar em suspens√£o ou cancelamento da conta.</p>
          <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:16px;">
            <button type="button" class="btn btn-secondary btn-sm" id="reservationCancelBack">Voltar</button>
            <button type="button" class="btn btn-primary btn-sm" id="reservationCancelConfirm">Confirmar cancelamento</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Chat com o anunciante (cliente) -->
  <div class="modal-overlay chat-drawer" id="clientChatModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="clientChatTitle">
      <button class="modal-close" type="button" id="clientChatClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info chat-layout" style="padding:24px; width:100%">
          <aside class="chat-sidebar">
            <h2 id="clientChatTitle" style="margin-top:0">Mensagens</h2>
            <div class="chat-sidebar-section">
              <h4>Suporte</h4>
              <button type="button" class="chat-thread-item" id="clientSupportThreadItem">Equipe Ze.EFE</button>
            </div>
            <div class="chat-sidebar-section">
              <h4>Reservas</h4>
              <div id="clientChatThreadsList"></div>
            </div>
          </aside>
          <section class="chat-main">
            <div id="clientChatHeader" class="rooms-message chat-header-line"></div>
            <div id="clientChatMessages" class="chat-messages"></div>
            <div class="chat-report-row">
              <button type="button" class="btn btn-secondary btn-sm" id="openReportProblemBtn">Relatar problema</button>
            </div>
            <form id="clientChatForm" class="chat-form">
              <input type="text" id="clientChatInput" placeholder="Digite uma mensagem" style="flex:1" />
              <button class="btn btn-primary" type="submit">Enviar</button>
            </form>
          </section>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="referralModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="referralTitle">
      <button class="modal-close" type="button" id="referralClose" aria-label="Fechar">&times;</button>
        <div class="modal-body">
          <div class="modal-info">
            <h2 id="referralTitle">Indique e Ganhe</h2>
            <p class="rooms-message">Preencha os dados abaixo para indicar uma empresa.</p>
            <div class="referral-info-card">
              <strong>Premia√ß√£o por parceria</strong>
              <p>Se a empresa fechar parceria com a Ze.EFE, os pr√™mios podem variar conforme o volume de funcion√°rios, chegando a at√© R$ 2.500 em dinheiro.</p>
            </div>
          </div>
        <form id="referralForm" class="referral-form">
          <div class="form-field">
            <label for="referralCompany">Qual empresa?</label>
            <input type="text" id="referralCompany" name="company" required />
          </div>
          <div class="form-field">
            <label for="referralContactName">Nome de pessoa respons√°vel</label>
            <input type="text" id="referralContactName" name="contact_name" required />
          </div>
          <div class="form-field">
            <label for="referralContactPhone">Telefone da pessoa respons√°vel</label>
            <input type="text" id="referralContactPhone" name="contact_phone" placeholder="(11) 9.1234-5678" required />
          </div>
          <div class="form-field">
            <label for="referralContactEmail">E-mail da pessoa respons√°vel</label>
            <input type="email" id="referralContactEmail" name="contact_email" required pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" placeholder="nome@empresa.com.br" inputmode="email" />
          </div>
          <div class="form-field">
            <label for="referralReason">Porque voc√™ acha que a empresa usaria a plataforma da Ze.EFE?</label>
            <textarea id="referralReason" name="reason" rows="4" required></textarea>
            <p class="referral-disclaimer">Ao enviar, voc√™ aceita que seu nome seja compartilhado com a pessoa indicada.</p>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-outline" id="referralCancel">Cancelar</button>
            <button type="submit" class="btn btn-primary">Indicar</button>
          </div>
          <div id="referralMessage" class="rooms-message referral-message" hidden></div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal: Relatar problema -->
  <div class="modal-overlay" id="reportProblemModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="reportProblemTitle">
      <button class="modal-close" type="button" id="reportProblemClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="reportProblemTitle" style="margin-top:0">Relatar problema</h2>
          <p class="rooms-message">Conte para a equipe Ze.EFE o que aconteceu. Suas mensagens desta conversa ser√£o usadas como contexto.</p>
          <form id="reportProblemForm" class="profile-edit-form">
            <div class="form-row">
              <label for="reportIssueType">Tipo de problema</label>
              <select id="reportIssueType" required>
                <option value="reserva">Reserva</option>
                <option value="atendimento">Atendimento</option>
                <option value="cancelamento">Cancelamento</option>
                <option value="pagamento">Pagamento</option>
                <option value="outro">Outro</option>
              </select>
            </div>
            <div class="form-row">
              <label for="reportIssueDescription">Descri√ß√£o</label>
              <textarea id="reportIssueDescription" rows="4" placeholder="Descreva o problema com o m√°ximo de detalhes poss√≠vel." required></textarea>
            </div>
            <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
              <button type="button" class="btn btn-secondary" id="reportProblemCancel">Cancelar</button>
              <button type="submit" class="btn btn-primary">Enviar relato</button>
            </div>
            <div class="form-row"><div id="reportProblemMessage" class="rooms-message"></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Convidar membro -->
  <div class="modal-overlay" id="inviteMemberModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="inviteMemberTitle">
      <button class="modal-close" type="button" id="inviteMemberClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="inviteMemberTitle" style="margin-top:0">Convidar membro</h2>
          <p class="rooms-message" style="margin-top:4px;margin-bottom:12px;">
            A busca ser√° realizada entre os usu√°rios j√° cadastrados na plataforma Ze.EFE. Se n√£o encontrado, enviaremos um convite de pr√©‚Äëcadastro com os dados informados.
          </p>
          <div class="form-grid-mini">
            <div>
              <label for="inviteCpf">CPF</label>
              <input type="text" id="inviteCpf" maxlength="14" placeholder="Somente n√∫meros" />
            </div>
            <div>
              <label for="inviteEmail">E-mail</label>
              <input type="email" id="inviteEmail" placeholder="Opcional para reenviar" />
            </div>
            <div>
              <label for="inviteRole">Papel</label>
              <select id="inviteRole">
                <option value="membro">Membro</option>
                <option value="gestor">Gestor</option>
                <option value="leitor">Leitor</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </div>
          <div class="form-row" style="display:flex; gap:8px; align-items:center;">
            <button class="btn btn-secondary" type="button" id="inviteLookupBtn">Buscar</button>
            <span id="inviteLookupResult" class="rooms-message"></span>
          </div>
          <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
            <button type="button" class="btn btn-secondary" id="inviteMemberCancel">Cancelar</button>
            <button type="button" class="btn btn-primary" id="inviteMemberSend">Enviar convite</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: aviso sobre visitantes/invites -->
  <div class="modal-overlay" id="bookingVisitorsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="bookingVisitorsTitle">
      <button class="modal-close" type="button" id="bookingVisitorsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="bookingVisitorsTitle" style="margin-top:0">Visitantes</h2>
          <p id="bookingVisitorsMessage" class="rooms-message" style="margin-bottom:16px"></p>
          <div style="display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap">
            <button type="button" class="btn btn-secondary" id="bookingVisitorsAddBtn">Adicionar convidados</button>
            <button type="button" class="btn btn-primary" id="bookingVisitorsContinueBtn">Continuar assim mesmo</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="bookingAdvancedFiltersModal" aria-hidden="true">
    <div class="modal-dialog modal-small advanced-filters-dialog" role="dialog" aria-modal="true" aria-labelledby="bookingAdvancedFiltersTitle">
      <button class="modal-close" type="button" aria-label="Fechar" id="bookingAdvancedFiltersClose">&times;</button>
      <div class="modal-body">
        <div class="modal-info advanced-filters-modal">
          <h2 id="bookingAdvancedFiltersTitle">Filtros avan√ßados</h2>
          <div class="advanced-filters-section">
            <h4>Comodidades</h4>
            <div id="bookingAmenityFilters" class="checkbox-grid" aria-label="Comodidades"></div>
          </div>
          <div class="advanced-filters-actions">
            <button id="bookingAdvancedFiltersClear" class="btn btn-secondary" type="button">Limpar</button>
            <button id="bookingAdvancedFiltersApply" class="btn btn-primary" type="button">Aplicar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Adicionar manualmente -->
  <div class="modal-overlay" id="manualMembersModal" aria-hidden="true">
    <div class="modal-dialog wide" role="dialog" aria-modal="true" aria-labelledby="manualMembersTitle">
      <button class="modal-close" type="button" id="manualMembersClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="manualMembersTitle" style="margin-top:0">Adicionar membros manualmente</h2>
          <p class="rooms-message" style="margin-top:4px;margin-bottom:12px;">
            Usu√°rios j√° cadastrados na Ze.EFE ser√£o adicionados √† empresa. Para e‚Äëmails/CPFs n√£o encontrados, enviaremos um convite de pr√©‚Äëcadastro para que concluam o registro e passem a fazer parte da empresa.
          </p>
          <div class="responsive-table manual-table-wrap">
            <table class="table manual-members-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>E-mail</th>
                  <th>CPF</th>
                  <th>Papel</th>
                </tr>
              </thead>
              <tbody id="manualMembersTBody"></tbody>
            </table>
          </div>
          <div style="display:flex; gap:8px; justify-content:space-between; margin-top:10px;">
            <button type="button" class="btn btn-secondary btn-sm" id="manualAddRow">Adicionar linha</button>
            <div>
              <button type="button" class="btn btn-secondary" id="manualMembersCancel">Cancelar</button>
              <button type="button" class="btn btn-primary" id="manualMembersSubmit">Enviar convites</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Importar contatos -->
  <div class="modal-overlay" id="importContactsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="importContactsTitle">
      <button class="modal-close" type="button" id="importContactsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="importContactsTitle" style="margin-top:0">Importar contatos</h2>
          <p class="rooms-message">Baixe o modelo, preencha at√© 50 linhas (Nome, E‚Äëmail, CPF) e importe para revisar e enviar convites.</p>
          <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
            <a class="btn btn-secondary" href="api/company_members_template_xlsx.php">Baixar modelo XLSX</a>
            <button type="button" class="btn btn-primary" id="importPickFile">Selecionar arquivo</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de edi√ß√£o de perfil -->
  <div class="modal-overlay" id="profileEditModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="profileEditTitle">
      <button class="modal-close" type="button" id="profileEditClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="profileEditTitle" style="margin-top:0">Editar perfil</h2>
          <form id="profileEditForm" class="profile-edit-form">
            <div class="form-grid-mini">
              <div>
                <label for="editName">Nome completo</label>
                <input type="text" id="editName" name="name" required />
              </div>
              <div>
                <label for="editLogin">Login</label>
                <input type="text" id="editLogin" name="login" required />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editEmail">E-mail</label>
                <input type="email" id="editEmail" name="email" readonly />
              </div>
              <div>
                <label for="editCpf">CPF</label>
                <input type="text" id="editCpf" name="cpf" readonly />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editPhone">Telefone</label>
                <input type="text" id="editPhone" name="phone" maxlength="15" />
              </div>
              <div>
                <label for="editWhatsapp">WhatsApp</label>
                <input type="text" id="editWhatsapp" name="whatsapp" maxlength="15" />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editZip">CEP</label>
                <input type="text" id="editZip" name="zip_code" maxlength="20" />
              </div>
              <div>
                <label for="editState">Estado</label>
                <input type="text" id="editState" name="state" maxlength="10" />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editCity">Cidade</label>
                <input type="text" id="editCity" name="city" />
              </div>
              <div>
                <label for="editCountry">Pa√≠s</label>
                <input type="text" id="editCountry" name="country" value="BR" />
              </div>
            </div>
            <div class="form-grid-mini">
              <div>
                <label for="editStreet">Endere√ßo</label>
                <input type="text" id="editStreet" name="street" />
              </div>
              <div>
                <label for="editNumber">N√∫mero</label>
                <input type="text" id="editNumber" name="number" />
              </div>
            </div>
            <div class="form-row">
              <label for="editComplement">Complemento</label>
              <input type="text" id="editComplement" name="complement" />
            </div>

            <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:space-between; flex-wrap:wrap;">
              <button type="button" class="btn btn-secondary" id="openPasswordModalBtn">Alterar senha</button>
              <div>
                <button type="button" class="btn btn-secondary" id="profileEditCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary">Salvar</button>
              </div>
            </div>
            <div class="form-row"><div id="profileEditMessage" class="rooms-message"></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Alterar senha -->
  <div class="modal-overlay" id="passwordChangeModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="passwordChangeTitle">
      <button class="modal-close" type="button" id="passwordChangeClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="passwordChangeTitle" style="margin-top:0">Alterar senha</h2>
          <form id="passwordChangeForm" class="profile-edit-form">
            <fieldset class="password-change">
              <legend>Nova senha de acesso</legend>
              <div class="form-grid-mini">
                <div>
                  <label for="currentPassword">Senha atual</label>
                  <input type="password" id="currentPassword" autocomplete="current-password" />
                </div>
                <div>
                  <label for="newPassword">Nova senha</label>
                  <input type="password" id="newPassword" autocomplete="new-password" />
                </div>
              </div>
              <div class="form-grid-mini">
                <div>
                  <label for="newPasswordConfirm">Confirmar nova senha</label>
                  <input type="password" id="newPasswordConfirm" autocomplete="new-password" />
                </div>
                <div class="password-indicators inline">
                  <span class="password-indicator state-neutral" id="pwdStrengthIndicator">For√ßa da senha: aguardando</span>
                  <span class="password-indicator state-neutral" id="pwdMatchIndicator">Confirma√ß√£o: aguardando</span>
                </div>
              </div>
              <p class="password-hint">A senha deve ter 8+ caracteres com letras, n√∫meros e s√≠mbolos.</p>
            </fieldset>
            <div class="modal-actions" style="margin-top:12px; display:flex; gap:12px; justify-content:flex-end;">
              <button type="button" class="btn btn-secondary" id="passwordChangeCancel">Cancelar</button>
              <button type="submit" class="btn btn-primary">Salvar nova senha</button>
            </div>
            <div class="form-row"><div id="passwordChangeMessage" class="rooms-message"></div></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Convites pendentes (inbox) -->
  <div class="modal-overlay" id="inviteInboxModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="inviteInboxTitle">
      <button class="modal-close" type="button" id="inviteInboxClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="padding:24px; width:100%">
          <h2 id="inviteInboxTitle" style="margin-top:0">Convites para empresas</h2>
          <p class="rooms-message">Voc√™ recebeu convites para participar de empresas. Aceite para ter acesso √†s funcionalidades de gest√£o.</p>
          <div id="inviteInboxList" class="inbox-list"></div>
          <div class="modal-actions" style="display:flex; gap:12px; justify-content:flex-end; margin-top:12px;">
            <button type="button" class="btn btn-secondary" id="inviteInboxDismiss">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Detalhes do curso -->
  <div class="modal-overlay" id="courseDetailsModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="courseDetailsTitle" style="width:920px; max-width:96vw;">
      <button class="modal-close" type="button" id="courseDetailsClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info course-modal-body">
          <div class="course-details-header">
            <div>
              <h2 id="courseDetailsTitle">Curso</h2>
              <p id="courseDetailsMeta" class="rooms-message"></p>
            </div>
            <div class="course-details-actions" id="courseDetailsActions"></div>
          </div>
          <div class="course-details-grid">
            <div>
              <div id="courseDetailsCoverWrapper" class="course-cover" hidden>
                <img id="courseDetailsCover" alt="Capa do curso">
              </div>
              <div id="courseDetailsDescription" class="course-description"></div>
            </div>
            <aside class="course-summary">
              <h4>Informa√ß√µes r√°pidas</h4>
              <ul>
                <li id="courseDetailsWhen"></li>
                <li id="courseDetailsWhere"></li>
                <li id="courseDetailsPrice"></li>
                <li id="courseDetailsSeats"></li>
              </ul>
              <div id="courseDetailsStatus" class="rooms-message"></div>
              <div id="courseEnrollArea">
                <p class="rooms-message">Confirme sua participa√ß√£o para receber o ingresso.</p>
                <label for="courseDetailsVoucher" class="course-label">Voucher (opcional)</label>
                <div class="course-voucher-row">
                  <input type="text" id="courseDetailsVoucher" placeholder="C√≥digo do voucher">
                  <button type="button" class="btn btn-secondary btn-sm" id="courseDetailsVoucherApply">Aplicar</button>
                </div>
              <div id="courseDetailsVoucherResult" class="rooms-message"></div>
              <button type="button" class="btn btn-primary" id="courseDetailsConfirm">Confirmar inscri√ß√£o</button>
            </div>
            <div id="courseTicketSection" class="course-ticket" hidden>
                <h4>Ingresso</h4>
                <p id="courseTicketCode"></p>
                <div id="courseTicketQr" class="course-ticket-qr"></div>
                <p id="courseTicketInfo" class="rooms-message"></p>
              </div>
            </aside>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay card-payment-modal" id="cardModal" aria-hidden="true">
    <div class="modal-dialog wide card-payment-modal" role="dialog" aria-modal="true" aria-labelledby="cardModalTitle">
      <button class="modal-close" type="button" id="cardModalClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="width:100%;">
          <h2 id="cardModalTitle">Salvar cartao</h2>
          <form id="cardSaveForm" class="card-payment-form">
            <input type="hidden" id="cardClientId" />
            <div class="form-field">
              <label for="cardNickname">Apelido do cartao (opcional)</label>
              <input type="text" id="cardNickname" placeholder="Ex.: Cartao pessoal" />
            </div>
            <div class="form-field">
              <label for="cardHolderName">Nome impresso no cartao</label>
              <input type="text" id="cardHolderName" required />
            </div>
            <div class="form-field">
              <label>Dados do cartao</label>
              <div class="stripe-card-wrapper">
                <div id="stripeCardElement" class="StripeElement"></div>
              </div>
            </div>
            <div class="form-field billing-toggle-row">
              <label>
                <input type="checkbox" id="cardUseProfileData" checked />
                Usar dados do perfil
              </label>
            </div>
            <div id="cardBillingFields" class="billing-fields">
              <div class="form-field">
                <label for="cardBillingEmail">E-mail de cobranca</label>
                <input type="email" id="cardBillingEmail" />
              </div>
              <div class="form-field">
                <label for="cardBillingZip">CEP</label>
                <input type="text" id="cardBillingZip" />
              </div>
              <div class="form-field">
                <label for="cardBillingState">Estado</label>
                <input type="text" id="cardBillingState" />
              </div>
              <div class="form-field">
                <label for="cardBillingCity">Cidade</label>
                <input type="text" id="cardBillingCity" />
              </div>
              <div class="form-field">
                <label for="cardBillingCountry">Pais</label>
                <input type="text" id="cardBillingCountry" />
              </div>
              <div class="form-field">
                <label for="cardBillingStreet">Rua</label>
                <input type="text" id="cardBillingStreet" />
              </div>
              <div class="form-field">
                <label for="cardBillingNumber">Numero</label>
                <input type="text" id="cardBillingNumber" />
              </div>
              <div class="form-field">
                <label for="cardBillingComplement">Complemento</label>
                <input type="text" id="cardBillingComplement" />
              </div>
            </div>
            <div class="rooms-message" id="cardErrors" hidden></div>
            <div class="rooms-message" id="cardSaveMessage" hidden></div>
            <div class="modal-footer">
              <button class="btn btn-secondary" type="button" id="cardModalCancel">Cancelar</button>
              <button class="btn btn-primary" type="submit" id="cardSubmitBtn">Salvar cartao</button>
            </div>
          </form>
          <div id="cardListEmpty" class="rooms-message"></div>
          <div id="cardListError" class="rooms-message" hidden></div>
          <section id="cardListSection" hidden>
            <h3>Cartoes salvos</h3>
            <ul id="cardList" class="card-list"></ul>
          </section>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="workshopCardModal" aria-hidden="true">
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="workshopCardTitle" style="width:640px; max-width:94vw;">
      <button class="modal-close" type="button" id="workshopCardClose" aria-label="Fechar">&times;</button>
      <div class="modal-body">
        <div class="modal-info" style="width:100%;">
          <h2 id="workshopCardTitle">Selecionar cart√£o</h2>
          <p class="rooms-message" id="workshopCardNotice">O Workshop ser√° pago quando atingir o m√≠nimo de participantes definido pelo organizador.</p>
          <div id="workshopCardList" class="card-list"></div>
          <div class="form-row" style="display:flex; gap:10px; justify-content:flex-end; margin-top:16px;">
            <button type="button" class="btn btn-secondary" data-open-card-modal>Gerenciar cart√µes</button>
            <button type="button" class="btn btn-primary" id="workshopCardConfirm">Confirmar inscri√ß√£o</button>
          </div>
          <div id="workshopCardError" class="rooms-message" hidden></div>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="site-footer-inner">
      <div class="footer-column footer-map">
        <h3>Mapa do site</h3>
        <div class="footer-links-grid">
          <div>
            <h4>Salas</h4>
            <a href="salas.html">Ver todas as salas</a>
          </div>
          <div>
            <h4>Cursos</h4>
            <a href="workshops.html">Agenda de cursos e workshops</a>
          </div>
          <div>
            <h4>√Årea do Cliente</h4>
            <a href="clientes.html">Reservas e visitantes</a>
          </div>
        </div>
      </div>
      <div class="footer-column footer-contact">
        <h3>Contato</h3>
        <p>contato@zeefe.com | <a href="https://wa.me/11922293332?text=Ol√°,%20gostaria%20de%20mais%20informa√ß√µes.">(11) 9.2229-3332</a></p>
        <p>Moema, S√£o Paulo - SP</p>
        <p><a href="https://www.instagram.com/zeefe_brasil/">Instagram</a> | <a href="https://www.linkedin.com/company/zeefe/about/?viewAsMember=true">LinkedIn</a></p>
      </div>
    </div>
    <div class="site-footer-bottom">
      <div class="footer-powered">
        <span>Powered by</span>
        <div class="footer-powered-logos">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='110' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%23005CAB'>HostGator</text></svg>" alt="HostGator" loading="lazy">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='130' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%2300317A'>Contabilizei</text></svg>" alt="Contabilizei" loading="lazy">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%23E10D5C'>cora</text></svg>" alt="Cora" loading="lazy">
        </div>
      </div>
      <p>¬© 2025 Ze.EFE - Todos os direitos reservados</p>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="" defer></script>
  <script src="https://js.stripe.com/v3/" defer></script>
  <script src="scripts/clientes.js" defer></script>
</body>
</html>
