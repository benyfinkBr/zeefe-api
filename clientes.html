<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ze.EFE - Portal do Cliente</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="client-portal-page client-logged-out">
  <header class="header">
    <h1 class="logo">Ze.EFE</h1>
    <nav>
      <a href="index.html">Início</a>
      <a href="salas.html">Salas</a>
      <a href="pre-reserva.html">Pré-Reserva</a>
      <a href="clientes.html" aria-current="page">Área do Cliente</a>
    </nav>
  </header>

  <main class="client-portal">
    <section id="authContainer" class="auth-container">
      <div id="authLogin" class="auth-screen">
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Portal do Cliente<br><span>Ze.EFE</span></h2>
          <form id="portalLoginForm" autocomplete="on">
            <input type="text" id="portalLoginIdentifier" name="identifier" placeholder="Login, e-mail ou CPF" required autocomplete="username" />
            <input type="password" id="portalLoginPassword" name="password" placeholder="Senha" required autocomplete="current-password" />
            <div class="remember-line">
              <label class="remember">
                <input type="checkbox" id="portalRememberMe" />
                <span>Lembrar login neste computador</span>
              </label>
            </div>
            <button class="btn btn-primary" type="submit">Entrar</button>
          </form>
          <div class="auth-quick-actions" id="authActions">
            <button type="button" class="ghost-btn" data-view="recovery">Esqueci minha senha</button>
            <button type="button" class="ghost-btn" data-view="register">Quero me cadastrar</button>
          </div>
        </div>
      </div>

      <div id="authRegister" class="auth-screen" hidden>
        <div class="login-card register-card">
          <div class="register-hero">
            <img src="img/logo.jpg" alt="Ze.EFE">
            <h2>Criar acesso<br><span>Portal do Cliente</span></h2>
          </div>
          <form id="portalRegisterForm" class="auth-form auth-form-grid" autocomplete="on">
            <div class="form-field">
              <label for="registerName">Nome completo</label>
              <input type="text" id="registerName" name="name" required />
            </div>
            <div class="form-field">
              <label for="registerEmail">E-mail</label>
              <input type="email" id="registerEmail" name="email" required autocomplete="email" />
            </div>
            <div class="form-field">
              <label for="registerLogin">Login</label>
              <input type="text" id="registerLogin" name="login" required autocomplete="username" />
            </div>
            <div class="form-field">
              <label for="registerCpf">CPF</label>
              <input type="text" id="registerCpf" name="cpf" maxlength="14" required autocomplete="off" />
            </div>
            <div class="form-field">
              <label for="registerPhone">Telefone (opcional)</label>
              <input type="text" id="registerPhone" name="phone" maxlength="15" autocomplete="tel" />
            </div>
            <div class="form-field">
              <label for="registerPassword">Senha</label>
              <input type="password" id="registerPassword" name="password" required autocomplete="new-password" />
            </div>
            <div class="form-field">
              <label for="registerPasswordConfirm">Confirmar senha</label>
              <input type="password" id="registerPasswordConfirm" name="password_confirm" required autocomplete="new-password" />
            </div>
            <div class="form-field form-field-full">
              <button class="btn btn-primary" type="submit">Concluir cadastro</button>
            </div>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authRecovery" class="auth-screen" hidden>
        <div class="login-card">
          <img src="img/logo.jpg" alt="Ze.EFE">
          <h2>Recuperar acesso<br><span>Portal do Cliente</span></h2>
          <form id="portalRecoveryForm" class="auth-form" autocomplete="on">
            <div class="form-field">
              <label for="recoveryLogin">Login ou e-mail cadastrado</label>
              <input type="text" id="recoveryLogin" name="login" required autocomplete="username" />
            </div>
            <p class="rooms-message">Enviaremos uma senha temporária para o e-mail registrado.</p>
            <button class="btn btn-primary" type="submit">Enviar nova senha</button>
          </form>
          <button type="button" class="ghost-btn" data-view="login">Voltar ao login</button>
        </div>
      </div>

      <div id="authMessage" class="rooms-message auth-message"></div>
    </section>

    <section id="clientPanels" class="portal-shell" hidden>
      <aside class="portal-nav">
        <div class="portal-nav-brand">
          <img src="img/logo.jpg" alt="Ze.EFE" />
          <h2>Gestão do Cliente</h2>
        </div>
        <nav class="portal-nav-links">
          <button type="button" data-panel="book" class="active">Reservar</button>
          <button type="button" data-panel="reservations">Minhas Reservas</button>
          <button type="button" data-panel="visitors">Visitantes</button>
          <button type="button" data-panel="profile">Meu Perfil</button>
        </nav>
        <button type="button" id="logoutBtn" class="nav-logout">Sair</button>
      </aside>

      <div class="portal-main">
        <header class="portal-header">
          <div>
            <h2>Olá, <span id="clientName"></span></h2>
            <div id="clientCompany" class="portal-subtitle"></div>
          </div>
          <div class="portal-actions">
            <a class="btn btn-secondary" href="pre-reserva.html">Pré-reserva</a>
            <button class="btn btn-secondary" type="button" id="refreshBtn">Atualizar</button>
          </div>
        </header>

        <div class="portal-content">
          <div id="panel-book" class="portal-section">
            <article class="form-card booking-card">
              <h3 id="bookingFormTitle">Reservar uma sala</h3>
              <form id="reservationBookForm">
                <input type="hidden" name="id" />
                <input type="hidden" name="room_id" id="bookingRoomId" />
                <input type="hidden" name="time_start" value="08:00" />
                <input type="hidden" name="time_end" value="20:00" />

                <div class="booking-stepper">
                  <div class="booking-stepper-item active" data-step-index="0">
                    <span>1</span>
                    <strong>Data</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="1">
                    <span>2</span>
                    <strong>Salas</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="2">
                    <span>3</span>
                    <strong>Detalhes</strong>
                  </div>
                  <div class="booking-stepper-item" data-step-index="3">
                    <span>4</span>
                    <strong>Visitantes</strong>
                  </div>
                </div>

                <section class="booking-step" data-step-index="0">
                  <div class="booking-calendar">
                    <header class="calendar-header">
                      <button type="button" id="bookingPrevMonth" aria-label="Mês anterior">&#10094;</button>
                      <div id="bookingCalendarLabel"></div>
                      <button type="button" id="bookingNextMonth" aria-label="Próximo mês">&#10095;</button>
                    </header>
                    <div class="calendar-grid" id="bookingCalendarGrid" role="grid" aria-labelledby="bookingCalendarLabel"></div>
                    <input type="hidden" id="bookingDateInput" name="date" required />
                  </div>
                  <p class="form-help fixed-schedule-note">Selecione um dia disponível. Reservas são diárias entre 08:00 e 20:00.</p>
                </section>

                <section class="booking-step" data-step-index="1" hidden>
                  <h4>Salas disponíveis</h4>
                  <div class="room-filters">
                    <div class="form-grid-mini">
                      <div>
                        <label for="bookingRoomSearch">Filtrar por nome</label>
                        <input type="text" id="bookingRoomSearch" placeholder="Digite parte do nome da sala" />
                      </div>
                      <div>
                        <label for="bookingCityFilter">Cidade</label>
                        <input type="text" id="bookingCityFilter" placeholder="Cidade" />
                      </div>
                      <div>
                        <label for="bookingStateFilter">Estado</label>
                        <input type="text" id="bookingStateFilter" placeholder="Estado" maxlength="2" />
                      </div>
                    </div>
                  </div>
                  <p class="form-help">Selecione uma sala disponível para a data escolhida.</p>
                  <div id="bookingRoomOptions" class="booking-room-options"></div>
                  <div id="bookingRoomFeedback" class="rooms-message"></div>
                </section>

                <section class="booking-step" data-step-index="2" hidden>
                  <div class="form-row">
                    <label for="bookingTitleInput">Título</label>
                    <input type="text" id="bookingTitleInput" name="title" maxlength="120" required />
                  </div>
                  <div class="form-row">
                    <label for="bookingDescriptionInput">Descrição / Observações</label>
                    <textarea id="bookingDescriptionInput" name="description" rows="3"></textarea>
                  </div>
                </section>

                <section class="booking-step" data-step-index="3" hidden>
                  <div class="form-row">
                    <label class="form-label">Visitantes</label>
                    <div class="visitor-multiselect" id="bookingVisitorSelector"></div>
                  </div>
                  <div class="form-row visitor-actions">
                    <label>
                      <input type="checkbox" name="send_invites" checked>
                      Enviar convite por e-mail aos visitantes selecionados
                    </label>
                    <button type="button" class="btn btn-secondary btn-sm" id="openVisitorsPanel">Gerenciar visitantes</button>
                  </div>
                </section>

                <div class="booking-navigation">
                  <button type="button" class="btn btn-secondary" id="bookingPrevBtn" hidden>Voltar</button>
                  <button type="button" class="btn btn-primary" id="bookingNextBtn">Avançar</button>
                  <button class="btn btn-primary" type="submit" id="bookingSubmitBtn" hidden>Solicitar reserva</button>
                  <button class="btn btn-secondary" type="button" id="cancelReservationEdit" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="bookingMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>

          <div id="panel-reservations" class="portal-section" hidden>
            <section class="client-lists">
              <article>
                <div class="list-header">
                  <h3>Minhas Reservas</h3>
                  <button class="btn btn-secondary" type="button" id="newReservationBtn">Nova reserva</button>
                </div>
                <div id="reservationsContainer" class="responsive-table"></div>
              </article>
            </section>
          </div>

          <div id="panel-visitors" class="portal-section" hidden>
            <div class="client-actions">
              <article class="form-card">
                <h3 id="visitorFormTitle">Novo Visitante</h3>
                <form id="visitorForm">
                  <input type="hidden" name="id" />
                  <div class="form-row">
                    <label>Nome completo</label>
                    <input type="text" name="name" required />
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>CPF</label>
                      <input type="text" name="cpf" maxlength="14" />
                    </div>
                    <div>
                      <label>RG</label>
                      <input type="text" name="rg" />
                    </div>
                  </div>
                  <div class="form-grid-mini">
                    <div>
                      <label>E-mail</label>
                      <input type="email" name="email" />
                    </div>
                    <div>
                      <label>Telefone</label>
                      <input type="text" name="phone" maxlength="15" />
                    </div>
                    <div>
                      <label>WhatsApp</label>
                      <input type="text" name="whatsapp" maxlength="15" />
                    </div>
                  </div>
                  <div class="form-row">
                    <label>Status</label>
                    <select name="status">
                      <option value="ativo">Ativo</option>
                      <option value="inativo">Inativo</option>
                    </select>
                  </div>
                  <div class="form-row">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <button class="btn btn-secondary" type="button" id="cancelVisitorEdit" hidden>Cancelar edição</button>
                  </div>
                </form>
              </article>
            </div>

            <section class="client-lists">
              <article>
                <div class="list-header">
                  <h3>Visitantes</h3>
                  <button class="btn btn-secondary" type="button" id="newVisitorBtn">Novo</button>
                </div>
                <div id="visitorsContainer" class="responsive-table"></div>
              </article>
            </section>
          </div>

          <div id="panel-profile" class="portal-section" hidden>
            <article class="form-card profile-card">
              <h3>Dados do Cliente</h3>
              <form id="profileForm" class="profile-form">
                <div class="form-grid-mini">
                  <div>
                    <label for="profileNameInput">Nome completo</label>
                    <input type="text" id="profileNameInput" name="name" required readonly />
                  </div>
                  <div>
                    <label for="profileLoginInput">Login</label>
                    <input type="text" id="profileLoginInput" name="login" required readonly />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profileEmailInput">E-mail</label>
                    <input type="email" id="profileEmailInput" name="email" readonly data-immutable="true" />
                  </div>
                  <div>
                    <label for="profileCpfInput">CPF</label>
                    <input type="text" id="profileCpfInput" name="cpf" readonly data-immutable="true" />
                  </div>
                </div>
                <div class="form-grid-mini">
                  <div>
                    <label for="profilePhoneInput">Telefone</label>
                    <input type="text" id="profilePhoneInput" name="phone" maxlength="15" readonly />
                  </div>
                  <div>
                    <label for="profileWhatsappInput">WhatsApp</label>
                    <input type="text" id="profileWhatsappInput" name="whatsapp" maxlength="15" readonly />
                  </div>
                </div>
                <div class="form-row">
                  <label for="profileCompanyInput">Empresa</label>
                  <input type="text" id="profileCompanyInput" class="input-readonly" readonly data-immutable="true" />
                </div>
                <p class="form-help">E-mail e CPF são definidos no cadastro inicial e não podem ser alterados pelo portal.</p>
                <div class="form-row profile-actions">
                  <button type="button" class="btn btn-secondary" id="editProfileBtn">Editar dados</button>
                  <button type="submit" class="btn btn-primary" id="saveProfileBtn" hidden>Salvar alterações</button>
                  <button type="button" class="btn btn-secondary" id="cancelProfileEditBtn" hidden>Cancelar</button>
                </div>
                <div class="form-row">
                  <div id="profileMessage" class="rooms-message"></div>
                </div>
              </form>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Contato: contato@zeefe.com | (11) 1234-5678</p>
    <p>Endereço: Moema, São Paulo - SP</p>
    <p><a href="#">Instagram</a> | <a href="#">LinkedIn</a></p>
    <p>© 2025 Ze.EFE - Todos os direitos reservados</p>
  </footer>

  <script src="scripts/clientes.js" defer></script>
</body>
</html>
