<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conteúdos — Ze.EFE</title>
  <link rel="stylesheet" href="/style.css?v=20241222" />
</head>
<body>
  <header class="site-header">
    <div class="site-header-inner">
      <div class="site-header-left">
        <a href="index.html" class="site-logo">
          <img src="img/logo.jpg" alt="Ze.EFE" />
        </a>
        <nav class="site-nav">
          <a href="salas.html">Salas</a>
          <a href="workshops.html">Cursos</a>
          <a href="conteudos.html" aria-current="page">Conteúdos</a>
          <a href="quemsomos.html">Quem somos</a>
        </nav>
      </div>
      <div class="site-header-actions">
        <a href="index.html#contato" class="site-link">Contato</a>
        <button class="btn btn-outline" type="button" onclick="window.location='clientes.html'">Entrar</button>
      </div>
    </div>
  </header>

  <main>
    <section class="landing-section">
      <div class="section-heading">
        <h3>Conteúdos para encontros presenciais</h3>
        <p>Ideias, boas práticas e novidades para quem organiza reuniões, treinamentos e workshops.</p>
      </div>
      <div id="conteudosGrid" class="news-grid"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="site-footer-inner">
      <div class="footer-column footer-map">
        <h3>Mapa do site</h3>
        <div class="footer-links-grid">
          <div>
            <h4>Salas</h4>
            <a href="salas.html">Ver todas as salas</a>
          </div>
          <div>
            <h4>Cursos</h4>
            <a href="workshops.html">Agenda de cursos e workshops</a>
          </div>
          <div>
            <h4>Área do Cliente</h4>
            <a href="clientes.html">Reservas e visitantes</a>
          </div>
          <div>
            <h4>Anunciante</h4>
            <a href="anunciante.html">Cadastrar salas e cursos</a>
          </div>
        </div>
      </div>
      <div class="footer-column footer-contact">
        <h3>Contato</h3>
        <p>contato@zeefe.com | (11) 9.6714-7377</p>
        <p>Moema, São Paulo - SP</p>
        <p><a href="#">Instagram</a> | <a href="#">LinkedIn</a></p>
      </div>
    </div>
    <div class="site-footer-bottom">
      <div class="footer-powered">
        <span>Powered by</span>
        <div class="footer-powered-logos">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='110' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%23005CAB'>HostGator</text></svg>" alt="HostGator" loading="lazy">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='130' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%2300317A'>Contabilizei</text></svg>" alt="Contabilizei" loading="lazy">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='110' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%2300B376'>pagar.me</text></svg>" alt="Pagar.me" loading="lazy">
          <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='30'><text x='5' y='20' font-family='Arial' font-size='16' fill='%23E10D5C'>cora</text></svg>" alt="Cora" loading="lazy">
        </div>
      </div>
      <p>© 2025 Ze.EFE - Todos os direitos reservados</p>
    </div>
  </footer>
  <script>
    (async () => {
      const grid = document.getElementById('conteudosGrid');
      if (!grid) return;
      grid.innerHTML = '<p class="rooms-message">Carregando conteúdos...</p>';
      try {
        const res = await fetch('api/apiget.php?table=posts');
        const json = await res.json();
        if (!json.success) {
          grid.innerHTML = '<p class="rooms-message">Não foi possível carregar os conteúdos.</p>';
          return;
        }
        let posts = json.data || [];
        posts = posts.filter(p => (p.status || '').toLowerCase() === 'publicado');
        if (!posts.length) {
          grid.innerHTML = '<p class="rooms-message">Nenhum conteúdo publicado no momento.</p>';
          return;
        }
        posts.sort((a, b) => {
          const da = a.published_at ? new Date(a.published_at).getTime() : 0;
          const db = b.published_at ? new Date(b.published_at).getTime() : 0;
          if (db !== da) return db - da;
          return (b.id || 0) - (a.id || 0);
        });
        grid.innerHTML = '';
        posts.forEach(p => {
          const card = document.createElement('article');
          card.className = 'news-card';
          if (p.cover_path) {
            const coverWrap = document.createElement('div');
            coverWrap.className = 'news-card-cover';
            const img = document.createElement('img');
            img.src = p.cover_path;
            img.alt = p.title || 'Imagem do conteúdo';
            coverWrap.appendChild(img);
            card.appendChild(coverWrap);
          }
          const title = document.createElement('h4');
          const link = document.createElement('a');
          link.href = `conteudo-detalhe.html?id=${p.id}`;
          link.textContent = p.title || 'Conteúdo';
          title.appendChild(link);
          card.appendChild(title);
          const tag = document.createElement('span');
          tag.className = 'news-tag';
          tag.textContent = (p.category || 'Conteúdo');
          card.appendChild(tag);
          const summary = document.createElement('p');
          summary.textContent = p.summary || '';
          card.appendChild(summary);
          grid.appendChild(card);
        });
      } catch (e) {
        console.error(e);
        grid.innerHTML = '<p class="rooms-message">Não foi possível carregar os conteúdos.</p>';
      }
    })();
  </script>
</body>
</html>
